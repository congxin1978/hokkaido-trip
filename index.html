<!doctype html>
<html lang="zh-HK">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>åŒ—æµ·é“ä¹‹æ—… Â· è©³ç´°å…§é ï¼‹å³æ™‚å¤©æ°£ï¼ˆå–®æª”ç‰ˆï¼‰</title>
<style>
:root{
  --ink:#0a1424; --muted:#4a5f78; --ring:#00000026; --paper:#fffdf9; --r:26px;
  --p1:#a0d8ff; --p2:#ffb86b; --p3:#9be8ff; --p3b:#d1b3ff; --p4:#ffd166; --p5:#a5c4ff;
  --p6:#8ed7ff; --p7:#fbcfe8; --p8:#ffbb8a; --p9:#b3f4d8;
}
*{box-sizing:border-box}
body{
  margin:0; color:var(--ink);
  font-family: ui-rounded, "SF Pro Rounded", system-ui, -apple-system, Segoe UI, Roboto, Inter, "PingFang HK", "Noto Sans JP", Helvetica, Arial, sans-serif;
  background:
    radial-gradient(1400px 700px at 10% -10%, #eaf4ff 0%, #f6fbff 36%, #ffffff 70%) no-repeat,
    linear-gradient(180deg,#eef8ff,#ffffff 26%, #ffffff 100%);
  overflow-x:hidden;
}
/* Snow */
.snow, .snow:before, .snow:after{
  position:fixed; pointer-events:none; top:0; left:0; right:0; bottom:0; content:"";
  background-image:
    radial-gradient(2px 2px at 20px 30px, #fff, #fff0),
    radial-gradient(3px 3px at 80px 120px, #fff, #fff0),
    radial-gradient(2px 2px at 180px 90px, #fff, #fff0),
    radial-gradient(2px 2px at 320px 40px, #fff, #fff0),
    radial-gradient(3px 3px at 460px 140px, #fff, #fff0);
  background-repeat:repeat;
  animation: snow 24s linear infinite;
  opacity:.55; z-index:0; display:none;
}
.snow.on, .snow.on:before, .snow.on:after{display:block}
.snow:before{animation-duration: 36s; opacity:.45}
.snow:after{animation-duration: 18s; opacity:.75}
@keyframes snow{ from{transform:translateY(-10vh)} to{transform:translateY(10vh)} }

header{position:sticky;top:0;z-index:5;background:#ffffffe8;backdrop-filter:blur(12px);border-bottom:1px solid #e5eef9}
.bar{max-width:980px;margin:0 auto;padding:12px 14px;display:flex;align-items:center;gap:10px;justify-content:space-between}
h1{margin:0;font-size:20px;letter-spacing:.3px;background:linear-gradient(90deg,#2251ff,#19d3ff,#1dd3a5,#ffc857);
  -webkit-background-clip:text;background-clip:text;color:transparent; text-shadow:0 2px 0 #ffffffa8}
.small{color:#5e6f86;font-size:12px}
.lang{display:flex; gap:8px; align-items:center}
.lang button{border:1px solid #dbe3f0;background:#fff;border-radius:10px;padding:6px 10px;box-shadow:0 6px 12px #00000012;font-weight:800}
.lang .on{background:#f2f7ff}

main{max-width:980px;margin:12px auto 100px;padding:0 12px; position:relative; z-index:1}
.grid{display:grid;grid-template-columns:1fr;gap:18px}
.btn{position:relative; display:flex; align-items:center; justify-content:space-between; gap:12px;
  text-decoration:none; color:#0b2240; padding:20px 18px; border-radius: 28px;
  background: radial-gradient(180% 100% at 50% 0%, #ffffff 0 45%, #f6fbff 60%, #eef6ff 100%),
             linear-gradient(180deg, #ffffff, #f0f6ff);
  border:1px solid #d7e6ff;
  box-shadow: 0 26px 36px -10px var(--ring), 0 12px 20px -6px #4b92ff2e,
              inset 0 0 0 2px #ffffffea, inset 0 22px 34px #ffffffcc,
              inset 0 -18px 24px #d2e6ff, inset 0 0 42px #e6f2ff;
  font-weight:900; font-size:18px; overflow:hidden}
.btn .left{display:flex;align-items:center;gap:12px}
.emoji{font-size:24px; filter: drop-shadow(0 2px 2px #00000010)}
.chev{font-weight:900; width:36px; height:36px; border-radius:12px; display:grid; place-items:center;
  background:linear-gradient(180deg,#ffffff,#f0f6ff); border:1px solid #d7e6ff; box-shadow:0 8px 16px #4b92ff30}
.tag{font-size:12px; padding:6px 10px; border-radius:999px; background:#ffffffd9; border:1px solid #dbe3f0; color:#0b2240}
.btn i.ear, .btn i.ear2{position:absolute; top:-12px; width:18px; height:18px; background:#fff; border:2px solid #e7f0ff; transform:rotate(45deg); box-shadow:0 6px 10px #00000014}
.btn i.ear{left:16px} .btn i.ear2{left:38px}
.btn::after{content:""; position:absolute; inset:-4px; border-radius: 36px; mix-blend-mode: screen; pointer-events:none; opacity:.95}
.decor{position:absolute; right:-12px; bottom:-10px; width:150px; height:150px; opacity:.18}
.b1::after{box-shadow: inset 0 0 140px 30px var(--p1)} .b1 .decor{background: radial-gradient(6px 6px at 20% 30%, #ffd966, #0000 60%), radial-gradient(6px 6px at 45% 60%, #a0d8ff, #0000 60%), radial-gradient(6px 6px at 70% 40%, #ffb3c7, #0000 60%)}
.b2::after{box-shadow: inset 0 0 160px 34px var(--p2)} .b2 .decor{inset:0; width:auto; height:auto; background: radial-gradient(20px 16px at 92% 28%, #ff6b6b 0 70%, #0000 71%), radial-gradient(10px 8px at 86% 38%, #ff9696 0 70%, #0000 71%), radial-gradient(10px 8px at 98% 42%, #ff9696 0 70%, #0000 71%); clip-path: polygon(70% 0,100% 0,100% 100%, 70% 100%)}
.b3::after{box-shadow: inset 0 0 160px 34px var(--p3), inset 0 0 220px 10px var(--p3b)} .b3 .decor{background: radial-gradient(2px 2px at 20% 30%, #000, #0000 70%), radial-gradient(8px 10px at 40% 60%, #000, #0000 70%), radial-gradient(5px 4px at 44% 55%, #fff, #fff0 70%), radial-gradient(2px 2px at 40% 50%, #ffb703, #0000 70%), radial-gradient(3px 3px at 64% 32%, #fff, #0000 70%)}
.b4::after{box-shadow: inset 0 0 160px 34px var(--p4)} .b4 .decor{width:150px;height:100px;background: repeating-linear-gradient(45deg,#6b3e2e 0 10px,#8a5a44 11px 20px); border-radius:20px; transform: rotate(-8deg)}
.b5::after{box-shadow: inset 0 0 160px 34px var(--p5)} .b5 .decor{width:130px;height:130px;background: radial-gradient(10px 14px at 30% 40%, #ffcc66, #0000 70%), radial-gradient(8px 12px at 50% 65%, #ffd88a, #0000 70%), radial-gradient(10px 14px at 70% 45%, #ffcc66, #0000 70%)}
.b6::after{box-shadow: inset 0 0 160px 34px var(--p6)} .b6 .decor{width:150px;height:110px;background: conic-gradient(from 0deg, #bfeaff, #e6ffff 20%, #bfeaff 40%, #e6ffff 60%, #bfeaff 80%, #bfeaff), radial-gradient(10px 10px at 30% 20%, #fff, #fff0 70%); border-radius:18px}
.b7::after{box-shadow: inset 0 0 160px 34px var(--p7)} .b7 .decor{width:140px;height:120px;background: radial-gradient(30px 18px at 40% 60%, #ffffff, #0000 70%), radial-gradient(18px 14px at 48% 48%, #ffffff, #0000 70%), radial-gradient(14px 10px at 56% 36%, #ffffff, #0000 70%)}
.b8::after{box-shadow: inset 0 0 160px 34px var(--p8)} .b8 .decor{width:150px;height:130px;background: radial-gradient(24px 16px at 30% 70%, #ffffff, #0000 70%), radial-gradient(70px 40px at 60% 80%, #ff8a66, #0000 70%), radial-gradient(60px 30px at 70% 60%, #ffb38a, #0000 70%)}
.b9::after{box-shadow: inset 0 0 160px 34px var(--p9)} .b9 .decor{width:160px;height:100px;background: radial-gradient(40px 18px at 60% 70%, #b3f4d8, #0000 70%)}

.section{display:none; margin-top:18px}
.section:target{display:block}

.hero{
  position:relative; border-radius: var(--r);
  border:1px solid #dbe3f0; background:#fff; overflow:hidden;
  box-shadow:0 24px 36px var(--ring), inset 0 0 0 2px #ffffffd9, inset 0 18px 28px #ffffffb8;
}
.hero .inner{padding:14px}
.hero[data-accent="p1"]::after{box-shadow: inset 0 0 180px 40px var(--p1)}
.hero[data-accent="p2"]::after{box-shadow: inset 0 0 180px 40px var(--p2)}
.hero[data-accent="p3"]::after{box-shadow: inset 0 0 180px 40px var(--p3)}
.hero[data-accent="p4"]::after{box-shadow: inset 0 0 180px 40px var(--p4)}
.hero[data-accent="p5"]::after{box-shadow: inset 0 0 180px 40px var(--p5)}
.hero[data-accent="p6"]::after{box-shadow: inset 0 0 180px 40px var(--p6)}
.hero[data-accent="p7"]::after{box-shadow: inset 0 0 180px 40px var(--p7)}
.hero[data-accent="p8"]::after{box-shadow: inset 0 0 180px 40px var(--p8)}
.hero[data-accent="p9"]::after{box-shadow: inset 0 0 180px 40px var(--p9)}
.hero::after{content:""; position:absolute; inset:-6px; border-radius: calc(var(--r)+8px); pointer-events:none}

/* Weather card */
.wx{margin:8px 0 12px; padding:10px; border:1px solid #dbe3f0; border-radius:16px; background:#f8fbff;
  display:flex; flex-wrap:wrap; gap:8px; align-items:center; box-shadow:0 10px 18px #00000010}
.wx .t{font-weight:900}
.wx small{color:#5e6f86}
.wx .item{flex:1 1 160px; background:#fff; border:1px dashed #e2ebf6; border-radius:12px; padding:8px}
.wx .item b{font-size:12px; color:#5a6a7e}
.wx .v{font-size:18px; font-weight:800}

/* Controls (audio) */
.controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap;justify-content:flex-end;margin-bottom:4px}
.controls input[type="file"]{font-size:12px}
.controls .btn{border:1px solid #dbe3f0;background:#fff;border-radius:12px;padding:8px 12px;box-shadow:0 6px 12px #00000012;font-weight:800}
.controls .vol{display:flex;align-items:center;gap:6px}
.controls input[type="range"]{width:120px}

.back{display:inline-block;margin:8px 0 0; text-decoration:none; color:#0b2240; border:1px solid #dbe3f0; background:#fff; padding:8px 12px; border-radius:12px; box-shadow:0 6px 10px #00000010}

.homebar{display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin:10px 0 14px}
.homebar .input{display:flex; align-items:center; gap:6px; border:1px solid #dbe3f0; border-radius:12px; padding:6px 10px; background:#fff}
.homebar .wx{margin:0; flex:1 1 260px}
@media (min-width:640px){ .row{display:grid; gap:12px; grid-template-columns:repeat(2,1fr)} }
</style>
</head>
<body>
<div id="snow" class="snow" aria-hidden="true"></div>

<header>
  <div class="bar">
    <h1 class="i18n" data-zh="åŒ—æµ·é“ä¹‹æ—… Â· è©³ç´°å…§é ï¼‹å³æ™‚å¤©æ°£ï¼ˆå–®æª”ç‰ˆï¼‰" data-en="Hokkaido Road Trip Â· Detail + Live Weather (Singleâ€‘file)">åŒ—æµ·é“ä¹‹æ—… Â· è©³ç´°å…§é ï¼‹å³æ™‚å¤©æ°£ï¼ˆå–®æª”ç‰ˆï¼‰</h1>
    <div class="lang">
      <span class="small i18n" data-zh="èªè¨€ Languageï¼š" data-en="Language èªè¨€ï¼š">èªè¨€ Languageï¼š</span>
      <button id="btn-zh" class="on">ä¸­æ–‡</button>
      <button id="btn-en">English</button>
    </div>
  </div>
</header>

<main>
  <!-- HOME: start date + Sapporo weather bar -->
  <div class="homebar" id="homebar">
    <div class="input">
      <span class="small i18n" data-zh="å‡ºç™¼æ—¥æœŸ" data-en="Start Date">å‡ºç™¼æ—¥æœŸ</span>
      <input id="start" type="date" value="2025-01-07">
    </div>
    <div class="wx" id="wx-home">
      <div class="t i18n" data-zh="æœ­å¹Œ å¤©æ°£ï¼ˆDay 1ï¼‰" data-en="Sapporo Weather (Day 1)">æœ­å¹Œ å¤©æ°£ï¼ˆDay 1ï¼‰</div>
      <small id="wx-home-date">â€”</small>
      <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="wh-cond">â€”</div></div>
      <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="wh-tmax">â€”</span> / <span id="wh-tmin">â€”</span> Â°C</div></div>
      <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="wh-pop">â€”%</div></div>
      <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="wh-wspd">â€”</span> km/h Â· <span id="wh-wdir">â€”</span></div></div>
    </div>
  </div>

  <!-- HOME buttons -->
  <div class="grid" id="home">
    <a class="btn b1" href="#day1"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">ğŸ›¬</span><span class="i18n" data-zh="Day 1 æŠµé”æœ­å¹Œ Â· ä½å®¿" data-en="Day 1 Arrival Sapporo Â· Stay">Day 1 æŠµé”æœ­å¹Œ Â· ä½å®¿</span></div><span class="tag i18n" data-zh="CTSâ†’æœ­å¹Œ" data-en="CTSâ†’Sapporo">CTSâ†’æœ­å¹Œ</span><span class="chev">â€º</span></a>
    <a class="btn b2" href="#day2"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">ğŸ¦€</span><span class="i18n" data-zh="Day 2 å ´å¤–å¸‚å ´ï¼‹ç©é›ª" data-en="Day 2 Seafood Market + Snow Fun">Day 2 å ´å¤–å¸‚å ´ï¼‹ç©é›ª</span></div><span class="tag i18n" data-zh="èŸ¹ Ã— æ»é‡éˆ´è˜­" data-en="Crab Ã— Takino">èŸ¹ Ã— æ»é‡éˆ´è˜­</span><span class="chev">â€º</span></a>
    <a class="btn b3" href="#day3"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">ğŸ§</span><span class="i18n" data-zh="Day 3 æ—­å±±ï¼‹ç¾ç‘›ï¼‹ç²¾éˆéœ²å°" data-en="Day 3 Asahiyama + Biei + Ningle Terrace">Day 3 æ—­å±±ï¼‹ç¾ç‘›ï¼‹ç²¾éˆéœ²å°</span></div><span class="tag i18n" data-zh="é•·é€”æ—¥" data-en="Long Drive">é•·é€”æ—¥</span><span class="chev">â€º</span></a>
    <a class="btn b4" href="#day4"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">ğŸ«</span><span class="i18n" data-zh="Day 4 æœ­å¹Œè¼•é¬†æ—¥" data-en="Day 4 Easy Sapporo Day">Day 4 æœ­å¹Œè¼•é¬†æ—¥</span></div><span class="tag i18n" data-zh="ç™½è‰²æˆ€äººÂ·ç¥å®®" data-en="Shiroi Koibito Â· Shrine">ç™½è‰²æˆ€äººÂ·ç¥å®®</span><span class="chev">â€º</span></a>
    <a class="btn b5" href="#day5"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">ğŸ®</span><span class="i18n" data-zh="Day 5 å°æ¨½ä¸€æ—¥éŠ" data-en="Day 5 Otaru Day Trip">Day 5 å°æ¨½ä¸€æ—¥éŠ</span></div><span class="tag i18n" data-zh="é‹æ²³Â·å¤©ç‹—å±±" data-en="Canal Â· Tenguyama">é‹æ²³Â·å¤©ç‹—å±±</span><span class="chev">â€º</span></a>
    <a class="btn b6" href="#day6"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">â„ï¸</span><span class="i18n" data-zh="Day 6 æ”¯ç¬æ¹–ï¼‹Outlet" data-en="Day 6 Lake Shikotsu + Outlet">Day 6 æ”¯ç¬æ¹–ï¼‹Outlet</span></div><span class="tag i18n" data-zh="æ¹–æ™¯Â·è³¼ç‰©" data-en="Lake Â· Shopping">æ¹–æ™¯Â·è³¼ç‰©</span><span class="chev">â€º</span></a>
    <a class="btn b7" href="#day7"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">ğŸ§–</span><span class="i18n" data-zh="Day 7 æœ­å¹ŒChill" data-en="Day 7 Sapporo Chill">Day 7 æœ­å¹ŒChill</span></div><span class="tag i18n" data-zh="å®šå±±æºªÂ·å¤œæ™¯" data-en="Jozankei Â· Night View">å®šå±±æºªÂ·å¤œæ™¯</span><span class="chev">â€º</span></a>
    <a class="btn b8" href="#day8"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">â™¨ï¸</span><span class="i18n" data-zh="Day 8 ç™»åˆ¥ä½å®¿ï¼ˆç™»åˆ¥å‘¨é‚Šï¼‰" data-en="Day 8 Noboribetsu Stay (Area)">Day 8 ç™»åˆ¥ä½å®¿ï¼ˆç™»åˆ¥å‘¨é‚Šï¼‰</span></div><span class="tag i18n" data-zh="åœ°ç„è°·Â·å¤§æ¹¯æ²¼Â·æº«æ³‰è¡—" data-en="Jigokudani Â· Oyunuma Â· Onsen Street">åœ°ç„è°·Â·å¤§æ¹¯æ²¼Â·æº«æ³‰è¡—</span><span class="chev">â€º</span></a>
    <a class="btn b9" href="#day9"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">âœˆï¸</span><span class="i18n" data-zh="Day 9 è¿”ç¨‹" data-en="Day 9 Departure">Day 9 è¿”ç¨‹</span></div><span class="tag i18n" data-zh="ç™»åˆ¥â†’CTS" data-en="Noboribetsuâ†’CTS">ç™»åˆ¥â†’CTS</span><span class="chev">â€º</span></a>
  </div>

  <!-- Example detail (full weather UI); other days simplified for brevity -->
  <section class="section" id="day8">
    <a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero" data-accent="p8">
      <div class="inner">
        <div class="wx">
          <div class="t i18n" data-zh="ç™»åˆ¥ å¤©æ°£ï¼ˆDay 8ï¼‰" data-en="Noboribetsu Weather (Day 8)">ç™»åˆ¥ å¤©æ°£ï¼ˆDay 8ï¼‰</div>
          <small id="wx-8-date">â€”</small>
          <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w8-cond">â€”</div></div>
          <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w8-tmax">â€”</span> / <span id="w8-tmin">â€”</span> Â°C</div></div>
          <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w8-pop">â€”%</div></div>
          <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w8-wspd">â€”</span> km/h Â· <span id="w8-wdir">â€”</span></div></div>
        </div>

        <h2 class="i18n" data-zh="Day 8 ç™»åˆ¥å‘¨é‚Š Â· Combo A" data-en="Day 8 Noboribetsu Area Â· Combo A">Day 8 ç™»åˆ¥å‘¨é‚Š Â· Combo A</h2>
        <p class="muted i18n" data-zh="å‡ºç™¼ï¼šæœ­å¹Œ 08:30 Â· åœ°ç„è°· â†’ å¤§æ¹¯æ²¼/å¥§ä¹‹æ¹¯ â†’ æº«æ³‰è¡—ï¼‹æ³‰æºå…¬åœ’è¶³æ¹¯ Â· å…¥ä½ï¼šç¬¬ä¸€æ»æœ¬é¤¨"
           data-en="Depart: Sapporo 08:30 Â· Jigokudani â†’ Oyunuma/Okunoyu â†’ Onsen Street + Gensen Park Footbath Â· Stay: Daiâ€‘ichi Takimotokan">
           å‡ºç™¼ï¼šæœ­å¹Œ 08:30 Â· åœ°ç„è°· â†’ å¤§æ¹¯æ²¼/å¥§ä¹‹æ¹¯ â†’ æº«æ³‰è¡—ï¼‹æ³‰æºå…¬åœ’è¶³æ¹¯ Â· å…¥ä½ï¼šç¬¬ä¸€æ»æœ¬é¤¨</p>
        <div class="row">
          <div class="card"><h2 class="i18n" data-zh="äº¤é€šé‡Œç¨‹ï¼ˆå†¬å­£ä¼°ç®—ï¼‰" data-en="Driving (winter estimate)">äº¤é€šé‡Œç¨‹ï¼ˆå†¬å­£ä¼°ç®—ï¼‰</h2>
            <details open><summary class="i18n" data-zh="æœ­å¹Œ â†’ åœ°ç„è°·ï¼ˆç´„ 115â€“120â€¯km / 1â€¯h40â€“1â€¯h50ï¼‰" data-en="Sapporo â†’ Jigokudani (â‰ˆ115â€“120â€¯km / 1h40â€“1h50)">æœ­å¹Œ â†’ åœ°ç„è°·ï¼ˆç´„ 115â€“120â€¯km / 1â€¯h40â€“1â€¯h50ï¼‰</summary><div class="kv i18n" data-zh="é“å¤®é“ï¼›é›ªæ³ä¿å®ˆã€‚" data-en="Hokkaido Expressway; add buffer for snow.">é“å¤®é“ï¼›é›ªæ³ä¿å®ˆã€‚</div></details>
            <details><summary class="i18n" data-zh="åœ°ç„è°· â†’ å¤§æ¹¯æ²¼/å¥§ä¹‹æ¹¯ï¼ˆç´„ 3â€“4â€¯km / 10â€¯minï¼‰" data-en="Jigokudani â†’ Oyunuma/Okunoyu (â‰ˆ3â€“4â€¯km / 10â€¯min)">åœ°ç„è°· â†’ å¤§æ¹¯æ²¼/å¥§ä¹‹æ¹¯ï¼ˆç´„ 3â€“4â€¯km / 10â€¯minï¼‰</summary><div class="kv i18n" data-zh="å±±è·¯æ…¢è¡Œï¼›æœ¨é“æ­¥è¡Œã€‚" data-en="Mountain road; boardwalk walking.">å±±è·¯æ…¢è¡Œï¼›æœ¨é“æ­¥è¡Œã€‚</div></details>
            <details><summary class="i18n" data-zh="å¤§æ¹¯æ²¼ â†’ æº«æ³‰è¡—/æ³‰æºå…¬åœ’ï¼ˆç´„ 2â€¯km / 6â€¯minï¼‰" data-en="Oyunuma â†’ Onsen Street/Gensen Park (â‰ˆ2â€¯km / 6â€¯min)">å¤§æ¹¯æ²¼ â†’ æº«æ³‰è¡—/æ³‰æºå…¬åœ’ï¼ˆç´„ 2â€¯km / 6â€¯minï¼‰</summary><div class="kv i18n" data-zh="å‚æ™šçœ‹é–“æ­‡æ³‰ã€‚" data-en="Geyser around dusk is atmospheric.">å‚æ™šçœ‹é–“æ­‡æ³‰ã€‚</div></details>
            <details><summary class="i18n" data-zh="æº«æ³‰è¡— â†’ ç¬¬ä¸€æ»æœ¬é¤¨ï¼ˆç´„ 0.5â€“1â€¯km / 3â€“5â€¯minï¼‰" data-en="Onsen Street â†’ Daiâ€‘ichi Takimotokan (â‰ˆ0.5â€“1â€¯km / 3â€“5â€¯min)">æº«æ³‰è¡— â†’ ç¬¬ä¸€æ»æœ¬é¤¨ï¼ˆç´„ 0.5â€“1â€¯km / 3â€“5â€¯minï¼‰</summary><div class="kv i18n" data-zh="Checkâ€‘in æ³¡æ¹¯ã€‚" data-en="Checkâ€‘in and soak.">Checkâ€‘in æ³¡æ¹¯ã€‚</div></details>
          </div>
          <div class="card"><h2 class="i18n" data-zh="ç”¨é¤å»ºè­°" data-en="Meal Suggestions">ç”¨é¤å»ºè­°</h2>
            <details open><summary class="i18n" data-zh="åˆé¤ï¼ˆç™»åˆ¥ï¼‰" data-en="Lunch (Noboribetsu)">åˆé¤ï¼ˆç™»åˆ¥ï¼‰</summary><div class="kv i18n" data-zh="æ³‰äº­ã€å‘³ã®å¤§ç‹ï¼ˆå’–å–±æ‹‰éºµï¼‰ã€‚" data-en="Sentei, Aji no Daio (curry ramen).">æ³‰äº­ã€å‘³ã®å¤§ç‹ï¼ˆå’–å–±æ‹‰éºµï¼‰ã€‚</div></details>
            <details><summary class="i18n" data-zh="ä¸‹åˆèŒ¶" data-en="Tea Break">ä¸‹åˆèŒ¶</summary><div class="kv i18n" data-zh="æº«æ³‰è›‹ã€ç”œé»å°åº—ã€‚" data-en="Onsen eggs, local sweets.">æº«æ³‰è›‹ã€ç”œé»å°åº—ã€‚</div></details>
            <details><summary class="i18n" data-zh="æ™šé¤" data-en="Dinner">æ™šé¤</summary><div class="kv i18n" data-zh="ç¬¬ä¸€æ»æœ¬é¤¨ æœƒå¸­/è‡ªåŠ©ã€‚" data-en="Daiâ€‘ichi Takimotokan kaiseki/buffet.">ç¬¬ä¸€æ»æœ¬é¤¨ æœƒå¸­/è‡ªåŠ©ã€‚</div></details>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Minimal sections for other days (weather targets only) -->
  <!-- Day1 -->
  <section class="section" id="day1"><a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero" data-accent="p1"><div class="inner">
      <div class="wx"><div class="t i18n" data-zh="æœ­å¹Œ å¤©æ°£ï¼ˆDay 1ï¼‰" data-en="Sapporo Weather (Day 1)">æœ­å¹Œ å¤©æ°£ï¼ˆDay 1ï¼‰</div><small id="wx-1-date">â€”</small>
        <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w1-cond">â€”</div></div>
        <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w1-tmax">â€”</span> / <span id="w1-tmin">â€”</span> Â°C</div></div>
        <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w1-pop">â€”%</div></div>
        <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w1-wspd">â€”</span> km/h Â· <span id="w1-wdir">â€”</span></div></div>
      </div>
      <h2 class="i18n" data-zh="Day 1 æŠµé”æœ­å¹Œ Â· ä½å®¿" data-en="Day 1 Arrival Sapporo Â· Stay">Day 1 æŠµé”æœ­å¹Œ Â· ä½å®¿</h2>
      <p class="muted">CTS â†’ æœ­å¹Œæ°‘å®¿ Â· æ™šä¸Šè¼•é¬†æ•£æ­¥</p>
    </div></div></section>

  <!-- Day2 -->
  <section class="section" id="day2"><a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero" data-accent="p2"><div class="inner">
      <div class="wx"><div class="t i18n" data-zh="æœ­å¹Œ å¤©æ°£ï¼ˆDay 2ï¼‰" data-en="Sapporo Weather (Day 2)">æœ­å¹Œ å¤©æ°£ï¼ˆDay 2ï¼‰</div><small id="wx-2-date">â€”</small>
        <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w2-cond">â€”</div></div>
        <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w2-tmax">â€”</span> / <span id="w2-tmin">â€”</span> Â°C</div></div>
        <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w2-pop">â€”%</div></div>
        <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w2-wspd">â€”</span> km/h Â· <span id="w2-wdir">â€”</span></div></div>
      </div>
      <h2 class="i18n" data-zh="Day 2 å ´å¤–å¸‚å ´ï¼‹ç©é›ª" data-en="Day 2 Seafood Market + Snow Fun">Day 2 å ´å¤–å¸‚å ´ï¼‹ç©é›ª</h2>
      <p class="muted">å ´å¤–å¸‚å ´ â†’ æ»é‡éˆ´è˜­ â†’ ç‹¸å°è·¯</p>
    </div></div></section>

  <!-- Day3 -->
  <section class="section" id="day3"><a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero" data-accent="p3"><div class="inner">
      <div class="wx"><div class="t i18n" data-zh="æ—­å· å¤©æ°£ï¼ˆDay 3ï¼‰" data-en="Asahikawa Weather (Day 3)">æ—­å· å¤©æ°£ï¼ˆDay 3ï¼‰</div><small id="wx-3-date">â€”</small>
        <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w3-cond">â€”</div></div>
        <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w3-tmax">â€”</span> / <span id="w3-tmin">â€”</span> Â°C</div></div>
        <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w3-pop">â€”%</div></div>
        <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w3-wspd">â€”</span> km/h Â· <span id="w3-wdir">â€”</span></div></div>
      </div>
      <h2 class="i18n" data-zh="Day 3 æ—­å±±ï¼‹ç¾ç‘›ï¼‹ç²¾éˆéœ²å°" data-en="Day 3 Asahiyama + Biei + Ningle Terrace">Day 3 æ—­å±±ï¼‹ç¾ç‘›ï¼‹ç²¾éˆéœ²å°</h2>
      <p class="muted">æ—­å±± â†’ ç¾ç‘› â†’ ç²¾éˆéœ²å°</p>
    </div></div></section>

  <!-- Day4 -->
  <section class="section" id="day4"><a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero" data-accent="p4"><div class="inner">
      <div class="wx"><div class="t i18n" data-zh="æœ­å¹Œ å¤©æ°£ï¼ˆDay 4ï¼‰" data-en="Sapporo Weather (Day 4)">æœ­å¹Œ å¤©æ°£ï¼ˆDay 4ï¼‰</div><small id="wx-4-date">â€”</small>
        <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w4-cond">â€”</div></div>
        <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w4-tmax">â€”</span> / <span id="w4-tmin">â€”</span> Â°C</div></div>
        <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w4-pop">â€”%</div></div>
        <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w4-wspd">â€”</span> km/h Â· <span id="w4-wdir">â€”</span></div></div>
      </div>
      <h2 class="i18n" data-zh="Day 4 æœ­å¹Œè¼•é¬†æ—¥" data-en="Day 4 Easy Sapporo Day">Day 4 æœ­å¹Œè¼•é¬†æ—¥</h2>
      <p class="muted">ç™½è‰²æˆ€äºº â†’ ç¥å®® â†’ é˜æ¨“/é›»è¦–å¡”</p>
    </div></div></section>

  <!-- Day5 -->
  <section class="section" id="day5"><a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero" data-accent="p5"><div class="inner">
      <div class="wx"><div class="t i18n" data-zh="å°æ¨½ å¤©æ°£ï¼ˆDay 5ï¼‰" data-en="Otaru Weather (Day 5)">å°æ¨½ å¤©æ°£ï¼ˆDay 5ï¼‰</div><small id="wx-5-date">â€”</small>
        <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w5-cond">â€”</div></div>
        <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w5-tmax">â€”</span> / <span id="w5-tmin">â€”</span> Â°C</div></div>
        <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w5-pop">â€”%</div></div>
        <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w5-wspd">â€”</span> km/h Â· <span id="w5-wdir">â€”</span></div></div>
      </div>
      <h2 class="i18n" data-zh="Day 5 å°æ¨½ä¸€æ—¥éŠ" data-en="Day 5 Otaru Day Trip">Day 5 å°æ¨½ä¸€æ—¥éŠ</h2>
      <p class="muted">é‹æ²³ â†’ ç»ç’ƒ/éŸ³æ¨‚ç›’ â†’ ä¸‰è§’å¸‚å ´ â†’ å¤©ç‹—å±±</p>
    </div></div></section>

  <!-- Day6 -->
  <section class="section" id="day6"><a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero" data-accent="p6"><div class="inner">
      <div class="wx"><div class="t i18n" data-zh="åƒæ­²/æ”¯ç¬æ¹– å¤©æ°£ï¼ˆDay 6ï¼‰" data-en="Chitose/Shikotsu Weather (Day 6)">åƒæ­²/æ”¯ç¬æ¹– å¤©æ°£ï¼ˆDay 6ï¼‰</div><small id="wx-6-date">â€”</small>
        <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w6-cond">â€”</div></div>
        <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w6-tmax">â€”</span> / <span id="w6-tmin">â€”</span> Â°C</div></div>
        <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w6-pop">â€”%</div></div>
        <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w6-wspd">â€”</span> km/h Â· <span id="w6-wdir">â€”</span></div></div>
      </div>
      <h2 class="i18n" data-zh="Day 6 æ”¯ç¬æ¹–ï¼‹Outlet" data-en="Day 6 Lake Shikotsu + Outlet">Day 6 æ”¯ç¬æ¹–ï¼‹Outlet</h2>
      <p class="muted">æ”¯ç¬æ¹– â†’ Outlet</p>
    </div></div></section>

  <!-- Day7 -->
  <section class="section" id="day7"><a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero" data-accent="p7"><div class="inner">
      <div class="wx"><div class="t i18n" data-zh="æœ­å¹Œ å¤©æ°£ï¼ˆDay 7ï¼‰" data-en="Sapporo Weather (Day 7)">æœ­å¹Œ å¤©æ°£ï¼ˆDay 7ï¼‰</div><small id="wx-7-date">â€”</small>
        <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w7-cond">â€”</div></div>
        <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w7-tmax">â€”</span> / <span id="w7-tmin">â€”</span> Â°C</div></div>
        <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w7-pop">â€”%</div></div>
        <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w7-wspd">â€”</span> km/h Â· <span id="w7-wdir">â€”</span></div></div>
      </div>
      <h2 class="i18n" data-zh="Day 7 æœ­å¹ŒChill" data-en="Day 7 Sapporo Chill">Day 7 æœ­å¹ŒChill</h2>
      <p class="muted">å®šå±±æºªæ—¥æ­¸ â†’ è—»å²©å±±ï¼ˆå¯é¸ï¼‰</p>
    </div></div></section>

  <!-- Day9 -->
  <section class="section" id="day9"><a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero" data-accent="p9"><div class="inner">
      <div class="wx"><div class="t i18n" data-zh="åƒæ­² å¤©æ°£ï¼ˆDay 9ï¼‰" data-en="Chitose Weather (Day 9)">åƒæ­² å¤©æ°£ï¼ˆDay 9ï¼‰</div><small id="wx-9-date">â€”</small>
        <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w9-cond">â€”</div></div>
        <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w9-tmax">â€”</span> / <span id="w9-tmin">â€”</span> Â°C</div></div>
        <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w9-pop">â€”%</div></div>
        <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w9-wspd">â€”</span> km/h Â· <span id="w9-wdir">â€”</span></div></div>
      </div>
      <h2 class="i18n" data-zh="Day 9 è¿”ç¨‹" data-en="Day 9 Departure">Day 9 è¿”ç¨‹</h2>
      <p class="muted">ç™»åˆ¥ â†’ æ–°åƒæ­²ï¼ˆ16:00 èˆªç­ï¼‰</p>
    </div></div></section>
</main>

<script>
// i18n labels
let currentLang = 'zh';
const WMO_ZH = {
  0:'æ™´',1:'å¤šé›²(å°‘)',2:'å¤šé›²(é–“æ­‡)',3:'é™°',45:'éœ§',48:'éœ§å‡',
  51:'æ¯›æ¯›é›¨(è¼•)',53:'æ¯›æ¯›é›¨(ä¸­)',55:'æ¯›æ¯›é›¨(å¼·)',
  56:'å†°æ¯›æ¯›é›¨(è¼•)',57:'å†°æ¯›æ¯›é›¨(å¼·)',
  61:'å°é›¨',63:'ä¸­é›¨',65:'å¤§é›¨',
  66:'å‡é›¨(è¼•)',67:'å‡é›¨(å¼·)',
  71:'å°é›ª',73:'ä¸­é›ª',75:'å¤§é›ª',
  77:'é›ªç²’',80:'é™£é›¨(è¼•)',81:'é™£é›¨(ä¸­)',82:'é™£é›¨(å¼·)',
  85:'é™£é›ª(è¼•)',86:'é™£é›ª(å¼·)',
  95:'é›·é›¨',96:'é›·é›¨(å°å†°é›¹)',99:'é›·é›¨(å¤§å†°é›¹)'
};
const WMO_EN = {
  0:'Clear',1:'Mainly clear',2:'Partly cloudy',3:'Overcast',45:'Fog',48:'Depositing rime fog',
  51:'Drizzle (light)',53:'Drizzle (moderate)',55:'Drizzle (dense)',
  56:'Freezing drizzle (light)',57:'Freezing drizzle (dense)',
  61:'Rain (light)',63:'Rain (moderate)',65:'Rain (heavy)',
  66:'Freezing rain (light)',67:'Freezing rain (heavy)',
  71:'Snow (light)',73:'Snow (moderate)',75:'Snow (heavy)',
  77:'Snow grains',80:'Rain showers (light)',81:'Rain showers (moderate)',82:'Rain showers (violent)',
  85:'Snow showers (light)',86:'Snow showers (heavy)',
  95:'Thunderstorm',96:'Thunderstorm (slight hail)',99:'Thunderstorm (heavy hail)'
};
const dirText = (deg, lang='zh')=>{
  const dirsZH = ['åŒ—','åŒ—åŒ—æ±','åŒ—æ±','æ±åŒ—æ±','æ±','æ±å—æ±','å—æ±','å—å—æ±','å—','å—å—è¥¿','å—è¥¿','è¥¿å—è¥¿','è¥¿','è¥¿åŒ—è¥¿','åŒ—è¥¿','åŒ—åŒ—è¥¿'];
  const dirsEN = ['N','NNE','NE','ENE','E','ESE','SE','SSE','S','SSW','SW','WSW','W','WNW','NW','NNW'];
  const ix = Math.round(deg/22.5) % 16;
  return (lang==='en'?dirsEN:dirsZH)[ix];
};

// Locations per day
const LOC = {
  home:{name_zh:'æœ­å¹Œ', name_en:'Sapporo', lat:43.0618, lon:141.3545},
  1:{name_zh:'æœ­å¹Œ', name_en:'Sapporo', lat:43.0618, lon:141.3545},
  2:{name_zh:'æœ­å¹Œ', name_en:'Sapporo', lat:43.0618, lon:141.3545},
  3:{name_zh:'æ—­å·', name_en:'Asahikawa', lat:43.7706, lon:142.3650},
  4:{name_zh:'æœ­å¹Œ', name_en:'Sapporo', lat:43.0618, lon:141.3545},
  5:{name_zh:'å°æ¨½', name_en:'Otaru', lat:43.1907, lon:141.0028},
  6:{name_zh:'åƒæ­²/æ”¯ç¬æ¹–', name_en:'Chitose/Shikotsu', lat:42.8209, lon:141.3923},
  7:{name_zh:'æœ­å¹Œ', name_en:'Sapporo', lat:43.0618, lon:141.3545},
  8:{name_zh:'ç™»åˆ¥', name_en:'Noboribetsu', lat:42.4124, lon:141.1069},
  9:{name_zh:'åƒæ­²', name_en:'Chitose', lat:42.7752, lon:141.6923}
};

// UI helpers
function qs(sel, root=document){ return root.querySelector(sel); }
function setText(id, v){ const el=qs(id); if(el) el.textContent = v; }
function fmt(n){ return (n==null||Number.isNaN(n)) ? 'â€”' : Math.round(n); }

// Build date list
function getDates(startStr){
  const start = new Date(startStr);
  return [...Array(9)].map((_,i)=>{
    const d = new Date(start);
    d.setDate(start.getDate()+i);
    return d.toISOString().slice(0,10);
  });
}

// Fetch daily forecast for a specific date
async function fetchDay(lat, lon, date, lang){
  const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=weather_code,temperature_2m_max,temperature_2m_min,precipitation_probability_max,wind_speed_10m_max,wind_direction_10m_dominant&timezone=Asia%2FTokyo&start_date=${date}&end_date=${date}`;
  const r = await fetch(url);
  if(!r.ok) throw new Error('HTTP '+r.status);
  const j = await r.json();
  const idx = 0;
  const code = j.daily.weather_code[idx];
  const map = lang==='en'? WMO_EN : WMO_ZH;
  return {
    code, cond: map[code]||code,
    tmax: j.daily.temperature_2m_max[idx],
    tmin: j.daily.temperature_2m_min[idx],
    pop: j.daily.precipitation_probability_max[idx],
    wspd: j.daily.wind_speed_10m_max[idx],
    wdir: j.daily.wind_direction_10m_dominant?.[idx]
  };
}

async function loadWeather(){
  const lang = currentLang;
  const startStr = (qs('#start')?.value) || '2025-01-07';
  const dates = getDates(startStr);

  // Home: Sapporo Day1
  setText('#wx-home-date', dates[0]);
  try{
    const d = await fetchDay(LOC.home.lat, LOC.home.lon, dates[0], lang);
    setText('#wh-cond', d.cond);
    setText('#wh-tmax', fmt(d.tmax));
    setText('#wh-tmin', fmt(d.tmin));
    setText('#wh-pop', (d.pop ?? 'â€”') + '%');
    setText('#wh-wspd', fmt(d.wspd));
    setText('#wh-wdir', d.wdir!=null? dirText(d.wdir, lang): 'â€”');
  }catch(e){
    setText('#wh-cond', lang==='en'?'Failed to load':'ç„¡æ³•å–å¾—');
  }

  // Detail pages
  for(let day=1; day<=9; day++){
    const target = LOC[day];
    const date = dates[day-1];
    setText('#wx-'+day+'-date', date);
    try{
      const d = await fetchDay(target.lat, target.lon, date, lang);
      setText('#w'+day+'-cond', d.cond);
      setText('#w'+day+'-tmax', fmt(d.tmax));
      setText('#w'+day+'-tmin', fmt(d.tmin));
      setText('#w'+day+'-pop', (d.pop ?? 'â€”') + '%');
      setText('#w'+day+'-wspd', fmt(d.wspd));
      setText('#w'+day+'-wdir', d.wdir!=null? dirText(d.wdir, lang): 'â€”');
    }catch(e){
      setText('#w'+day+'-cond', lang==='en'?'Failed to load':'ç„¡æ³•å–å¾—');
    }
  }
}

// Snow only on detail pages
function updateSnow(){
  const hash = location.hash;
  const snow = document.getElementById('snow');
  if(hash && hash.startsWith('#day')) snow.classList.add('on'); else snow.classList.remove('on');
}
window.addEventListener('hashchange', updateSnow); updateSnow();

// Audio controls for each section
document.querySelectorAll('.section').forEach(sec=>{
  const file = sec.querySelector('.file');
  const audio = sec.querySelector('.audio');
  const play = sec.querySelector('.play');
  const range = sec.querySelector('.range');
  if(!file||!audio||!play||!range) return;
  file.addEventListener('change', ()=>{
    const f = file.files[0];
    if(f){ audio.src = URL.createObjectURL(f); audio.load(); }
  });
  play.addEventListener('click', async ()=>{
    try{
      if(audio.paused){ await audio.play(); play.textContent = currentLang==='en' ? 'â¸ï¸ Pause' : 'â¸ï¸ æš«åœ'; }
      else { audio.pause(); play.textContent = currentLang==='en' ? 'â–¶ï¸ Play / Pause' : 'â–¶ï¸ æ’­æ”¾ / æš«åœ'; }
    }catch(e){}
  });
  range.addEventListener('input', ()=> audio.volume = range.value);
  audio.volume = range.value;
});

// Language toggle (apply to all .i18n)
const applyLang = (lang)=>{
  currentLang = lang;
  document.querySelectorAll('.i18n').forEach(el=>{
    const zh = el.getAttribute('data-zh');
    const en = el.getAttribute('data-en');
    if(lang==='en' && en){ el.textContent = en; }
    else if(zh){ el.textContent = zh; }
  });
  document.getElementById('btn-zh').classList.toggle('on', lang==='zh');
  document.getElementById('btn-en').classList.toggle('on', lang==='en');
  document.documentElement.setAttribute('lang', lang==='en' ? 'en' : 'zh-HK');
  // re-render wind direction labels after language switch
  loadWeather();
};

document.getElementById('btn-zh').addEventListener('click', ()=>applyLang('zh'));
document.getElementById('btn-en').addEventListener('click', ()=>applyLang('en'));
document.getElementById('start').addEventListener('change', loadWeather);

// Initial
applyLang('zh');
loadWeather();
</script>
</body>
</html>
