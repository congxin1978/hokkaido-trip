<!doctype html>
<html lang="zh-HK">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>åŒ—æµ·é“ä¹‹æ—… Â· æ‰å¹³ç²‰å½©ç‰ˆï¼ˆè²¼ç´™é¦–é ï¼‹å¤©æ°£ï¼‹BGMï¼‹ç›¸é›†ï¼‰</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700;800&family=Zen+Maru+Gothic:wght@500;700&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://source.unsplash.com">
<link rel="preconnect" href="https://cdn.pixabay.com">
<style>
:root{
  --bg1:#f5fbff; --bg2:#ffffff;
  --ink:#172134;
  --pink1:#ffc6d9; --pink2:#ffe3ef;
  --wxbg:#1d3b6f; --wxline:#5b8bd5; --wxitem:#173059;
  --ring:#00000014;
  --p1:#ffdca8; --p2:#b8f0df; --p3:#bcdcff; --p4:#d2c6ff; --p5:#ffc7a9;
  --p6:#ffc6e3; --p7:#ffe28a; --p8:#ffb3c3; --p9:#c7efc2;
}
*{box-sizing:border-box}
body{margin:0;font-family:"Baloo 2","Zen Maru Gothic",ui-rounded,system-ui;color:var(--ink);
  background:linear-gradient(180deg,var(--bg1),var(--bg2) 65%)}
header{position:sticky;top:0;z-index:30;background:linear-gradient(180deg,var(--pink1),var(--pink2));
  border-bottom:1px solid #ffd9ee}
.bar{max-width:1100px;margin:0 auto;padding:10px 14px;display:flex;align-items:center;justify-content:space-between;gap:10px}
h1{margin:0;font-size:22px;color:#3a1021;text-shadow:0 1px 0 #fff8;display:flex;align-items:center;gap:10px}
.lang,.audio{display:flex;gap:8px;align-items:center}
.lang button,.audio button{border:1px solid #ffeef6;background:#fff;border-radius:12px;padding:6px 10px;
  box-shadow:0 3px 8px #00000010;font-weight:800}
.lang .on{background:#ffeef6}
main{max-width:1100px;margin:14px auto 80px;padding:0 14px}
.snow,.snow:before,.snow:after{position:fixed;inset:0;pointer-events:none;content:"";
  background-image:radial-gradient(2px 2px at 20px 30px,#fff7,#0000),
  radial-gradient(2.5px 2.5px at 120px 80px,#fff6,#0000),
  radial-gradient(2px 2px at 260px 40px,#fff7,#0000);
  background-repeat:repeat;animation:snow 26s linear infinite;opacity:.8;display:none;z-index:0}
.snow.on,.snow.on:before,.snow.on:after{display:block}
.snow:before{animation-duration:34s;opacity:.6}.snow:after{animation-duration:18s;opacity:.9}
@keyframes snow{from{transform:translateY(-6vh)}to{transform:translateY(6vh)}}
.wx{margin:10px 0 14px;padding:10px;border:1px solid var(--wxline);border-radius:16px;
  background:var(--wxbg);color:#e8f2ff;display:flex;flex-wrap:wrap;gap:10px;align-items:center;
  box-shadow:0 8px 16px #00000022}
.wx .t{font-weight:900}.wx small{color:#cfe0ff}
.wx .item{flex:1 1 160px;background:var(--wxitem);border:1px dashed var(--wxline);border-radius:12px;padding:8px}
.wx .item b{font-size:13px;color:#dcedff}.wx .v{font-size:20px;font-weight:800}
.stickers{display:grid;grid-template-columns:repeat(2,1fr);gap:24px;justify-items:center;margin-top:12px}
@media(min-width:780px){.stickers{grid-template-columns:repeat(3,1fr)}}
.sticker{width:168px;height:168px;border-radius:36px;position:relative;display:grid;place-items:center;text-decoration:none;color:#123;
  border:2px solid #ffffff; background:rgba(255,255,255,.9); backdrop-filter:blur(2px);
  box-shadow:0 8px 18px #0000001f, 0 1px 0 #ffffffcc; transition:transform .15s ease}
.sticker .plate{width:154px;height:154px;border-radius:28px;display:grid;place-items:center;color:#fff;font-weight:900;
  border:2px solid #ffffff; box-shadow:inset 0 6px 12px #0000000e}
.sticker .label{position:absolute;bottom:-22px;width:190px;text-align:center;font-weight:900;font-size:16px;color:#2a3a55;
  text-shadow:0 1px 0 #fff8}
.sticker:nth-child(1){transform:rotate(-6deg)} .sticker:nth-child(2){transform:rotate(4deg)}
.sticker:nth-child(3){transform:rotate(-2.5deg)} .sticker:nth-child(4){transform:rotate(3deg)}
.sticker:nth-child(5){transform:rotate(-5deg)} .sticker:nth-child(6){transform:rotate(2.5deg)}
.sticker:nth-child(7){transform:rotate(-3deg)} .sticker:nth-child(8){transform:rotate(5deg)}
.sticker:nth-child(9){transform:rotate(-2deg)}
.sticker:hover{transform:scale(1.03) rotate(0deg)}
.c1{background:linear-gradient(180deg,var(--p1),#ffc980)} .c2{background:linear-gradient(180deg,var(--p2),#88e5c8)}
.c3{background:linear-gradient(180deg,var(--p3),#8ec5ff)} .c4{background:linear-gradient(180deg,var(--p4),#bca9ff)}
.c5{background:linear-gradient(180deg,var(--p5),#ffb48c)} .c6{background:linear-gradient(180deg,var(--p6),#ff9fcd)}
.c7{background:linear-gradient(180deg,var(--p7),#ffd75f)} .c8{background:linear-gradient(180deg,var(--p8),#ff93a9)}
.c9{background:linear-gradient(180deg,var(--p9),#9fe590)}
.sticker svg{width:92px;height:92px;filter:drop-shadow(0 1px 0 #0002)}
.section{display:none;margin-top:20px}.section:target{display:block}
.hero{border:1px solid #ebf2f9;border-radius:20px;background:#fff;box-shadow:0 12px 22px var(--ring)}.hero .inner{padding:14px}
.row{display:grid;gap:14px;grid-template-columns:1fr}
.card{background:#fff;border:1px solid #efeef4;border-radius:16px;box-shadow:0 8px 16px var(--ring);padding:14px}
.card h2{margin:6px 0;font-size:20px}
.kv{font-size:18px;line-height:1.7}
.back{display:inline-block;margin:10px 0;padding:10px 14px;border-radius:12px;background:#fff;border:1px solid #e3edf8;color:#123;text-decoration:none}
.gallery{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
.gallery figure{margin:0;border:1px solid #e6e1d5;border-radius:12px;overflow:hidden;background:#fff}
.gallery img{width:100%;display:block}.gallery figcaption{font-size:12px;padding:6px 8px;color:#445}
.placeholder{display:grid;place-items:center;aspect-ratio:4/3;background:repeating-linear-gradient(45deg,#eef2f7,#eef2f7 8px,#e5ecf4 8px,#e5ecf4 16px);color:#567}
.thumb{width:68px;height:50px;object-fit:cover;border-radius:8px;margin-left:10px;vertical-align:middle;border:1px solid #e6e1d5}
@media(min-width:720px){.row{grid-template-columns:repeat(2,1fr)}}
</style>
</head>
<body>
<div id="snow" class="snow"></div>
<header>
  <div class="bar">
    <h1>ğŸŒ¸ åŒ—æµ·é“ä¹‹æ—… Â· æ‰å¹³ç²‰å½©ç‰ˆ</h1>
    <div class="audio">
      <button id="bgm-toggle">â–¶ï¸ æ’­æ”¾éŸ³æ¨‚</button>
      <audio id="bgm" preload="none" loop>
        <source src="https://cdn.pixabay.com/download/audio/2021/09/14/audio_5d3da0e8b4.mp3?filename=tokyo-cafe-ambient-10887.mp3" type="audio/mpeg">
      </audio>
      <button id="snow-toggle">â„ï¸ é£„é›ªï¼šé–‹</button>
    </div>
    <div class="lang">
      <button id="btn-zh" class="on">ä¸­æ–‡</button>
      <button id="btn-en">English</button>
    </div>
  </div>
</header>

<main id="app">
  <div class="wx">
    <div class="t">æœ­å¹Œ å¤©æ°£ï¼ˆDay 1ï¼‰</div>
    <small id="wx-home-date">â€”</small>
    <div class="item"><b>ç‹€æ³</b><div class="v" id="wh-cond">â€”</div></div>
    <div class="item"><b>æœ€é«˜/æœ€ä½</b><div class="v"><span id="wh-tmax">â€”</span>/<span id="wh-tmin">â€”</span> Â°C</div></div>
    <div class="item"><b>é™æ°´</b><div class="v" id="wh-pop">â€”%</div></div>
    <div class="item"><b>é¢¨</b><div class="v"><span id="wh-wspd">â€”</span> km/h Â· <span id="wh-wdir">â€”</span></div></div>
  </div>

  <div class="stickers" id="stickers"></div>
  <div id="sections"></div>
</main>

<script>
let currentLang='zh';
const ICONS={
  plane:`<svg viewBox="0 0 24 24"><path d="M2 13l9 1 10 6-2 2-8-7-5 4-2-1 4-5-6-0z" fill="#fff"/></svg>`,
  crab:`<svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="6" fill="#fff"/></svg>`,
  penguin:`<svg viewBox="0 0 24 24" fill="none"><path d="M12 3c3 0 5 2.5 5 6v7c0 2.2-1.8 4-4 4h-2c-2.2 0-4-1.8-4-4V9c-3.5 2-6 5-6z" fill="#fff"/></svg>`,
  snowman:`<svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="15" r="6.5" fill="#fff"/><circle cx="12" cy="8" r="4.2" fill="#fff"/></svg>`,
  cart:`<svg viewBox="0 0 24 24" fill="none"><path d="M3 5h2l2 10h10l2-7H8" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="10" cy="19" r="1.8" fill="#fff"/><circle cx="17" cy="19" r="1.8" fill="#fff"/></svg>`,
  cat:`<svg viewBox="0 0 24 24" fill="none"><ellipse cx="12" cy="14" rx="7" ry="6" fill="#fff"/><path d="M6 8l-1-3 3 1 2-2 2 2 3-1-1 3" stroke="#fff" stroke-width="2" stroke-linecap="round"/></svg>`,
  fatcat:`<svg viewBox="0 0 24 24" fill="none"><ellipse cx="12" cy="13" rx="8" ry="7" fill="#fff"/></svg>`,
  onsen:`<svg viewBox="0 0 24 24" fill="none"><path d="M4 17c4 3 12 3 16 0" stroke="#fff" stroke-width="2"/><path d="M8 6c-2 3 2 3 0 6m4-6c-2 3 2 3 0 6m4-6c-2 3 2 3 0 6" stroke="#fff" stroke-width="2" stroke-linecap="round"/></svg>`
};

function u(q){ return `https://source.unsplash.com/720x480/?${encodeURIComponent(q)}`; }

const DAYS=[
  {id:1,icon:'plane',color:'c1',zh:'Day 1 æŠµé”æœ­å¹Œ',en:'Arrival',place:{name:'æœ­å¹Œ',lat:43.0618,lon:141.3545},
    sights:[{id:'cts',zh:'æ–°åƒæ­²æ©Ÿå ´ â†’ æœ­å¹Œ',en:'New Chitose â†’ Sapporo',map:'https://maps.google.com/?q=New+Chitose+Airport',parking:['https://www.google.com/maps/search/parking+New+Chitose+Airport'],imgs:[u('New Chitose Airport'),u('Sapporo skyline winter'),u('Sapporo city snow'),u('Hokkaido winter road'),u('Sapporo night'),u('Hokkaido travel')]}],
    dining:[{zh:'ä¸€ç²’åºµï¼ˆå‘³å™Œæ‹‰éºµï¼‰',en:'Ichiryuan',map:'https://maps.google.com/?q=Ichiryuan+Sapporo'}]
  },
  {id:2,icon:'crab',color:'c2',zh:'Day 2 åƒèŸ¹ï¼‹ç©é›ª',en:'Crab & Snow',place:{name:'æœ­å¹Œ',lat:43.0618,lon:141.3545},
    sights:[
      {id:'curb',zh:'æœ­å¹Œ å ´å¤–å¸‚å ´',en:'Sapporo Curb Market',map:'https://maps.google.com/?q=Sapporo+Curb+Market',parking:['https://www.google.com/maps/search/parking+Sapporo+Curb+Market'],imgs:[u('Sapporo fish market crab'),u('Hokkaido seafood market'),u('king crab market'),u('Sapporo market'),u('Hokkaido crab'),u('seafood don Hokkaido')]},
      {id:'takino',zh:'æ»é‡éˆ´è˜­ Snow World',en:'Takino Suzuran Snow World',map:'https://maps.google.com/?q=Takino+Suzuran+Hillside+National+Government+Park',parking:['https://www.google.com/maps/search/parking+Takino+Suzuran+Hillside+Park'],imgs:[u('sledding park snow'),u('snow tubing'),u('family snow park'),u('Sapporo winter park'),u('kids snow play'),u('Hokkaido snow fun')]}
    ],
    dining:[{zh:'åŒ—ã®ã‚°ãƒ«ãƒ¡äº­',en:'Kitanogurume Tei',map:'https://maps.google.com/?q=Kitanogurume+Tei'}]
  },
  {id:3,icon:'penguin',color:'c3',zh:'Day 3 æ—­å±±ï¼‹ç¾ç‘›ï¼‹ç²¾éˆéœ²å°',en:'Zoo + Biei + Ningle',place:{name:'æ—­å·/ç¾ç‘›',lat:43.7706,lon:142.3650},
    sights:[
      {id:'zoo',zh:'æ—­å±±å‹•ç‰©åœ’ ä¼éµæ•£æ­¥',en:'Asahiyama Penguin Walk',map:'https://maps.google.com/?q=Asahiyama+Zoo',parking:['https://www.google.com/maps/search/parking+Asahiyama+Zoo'],imgs:[u('penguin winter walk'),u('penguin snow'),u('asahiyama zoo penguin'),u('zoo winter japan'),u('penguin parade'),u('penguins arctic')]},
      {id:'bluepond',zh:'ç¾ç‘› é’æ± ',en:'Biei Blue Pond',map:'https://maps.google.com/?q=Biei+Blue+Pond',parking:['https://www.google.com/maps/search/parking+Blue+Pond+Biei'],imgs:[u('Biei Blue Pond winter'),u('Blue pond Hokkaido'),u('Biei snow trees'),u('Biei winter landscape'),u('frozen pond blue'),u('Hokkaido blue pond')]},
      {id:'ningle',zh:'å¯Œè‰¯é‡ ç²¾éˆéœ²å°',en:'Ningle Terrace',map:'https://maps.google.com/?q=Ningle+Terrace',parking:['https://www.google.com/maps/search/parking+Ningle+Terrace'],imgs:[u('Ningle Terrace winter lights'),u('Furano winter huts'),u('wood cabins snow japan'),u('forest lights winter'),u('Furano snow night'),u('Hokkaido wooden cottage')]}
    ],
    dining:[{zh:'æ—­å·æ‹‰éºµæ‘ é’è‘‰',en:'Aoba (Ramen Village)',map:'https://maps.google.com/?q=Asahikawa+Ramen+Village+Aoba'}]
  },
  {id:4,icon:'snowman',color:'c4',zh:'Day 4 ç™½è‰²æˆ€äººå…¬åœ’ï¼‹å¸‚å€',en:'Shiroi Koibito + City',place:{name:'æœ­å¹Œ',lat:43.0618,lon:141.3545},
    sights:[
      {id:'white',zh:'ç™½è‰²æˆ€äººå…¬åœ’',en:'Shiroi Koibito Park',map:'https://maps.google.com/?q=Shiroi+Koibito+Park',parking:['https://www.google.com/maps/search/parking+Shiroi+Koibito+Park'],imgs:[u('chocolate factory japan'),u('Sapporo theme park winter'),u('European style building snow'),u('clock tower snow'),u('illumination winter japan'),u('sweets factory japan')]},
      {id:'clock',zh:'æœ­å¹Œæ™‚è¨ˆå°',en:'Sapporo Clock Tower',map:'https://maps.google.com/?q=Sapporo+Clock+Tower',parking:['https://www.google.com/maps/search/parking+Sapporo+Clock+Tower'],imgs:[u('Sapporo Clock Tower winter'),u('Sapporo Clock Tower'),u('Sapporo snow street'),u('Sapporo landmark'),u('Sapporo old building winter'),u('Sapporo tourism winter')]},
      {id:'odori',zh:'å¤§é€šå…¬åœ’ï¼‹é›»è¦–å¡”å¤–è§€',en:'Odori Park + TV Tower',map:'https://maps.google.com/?q=Odori+Park+Sapporo',parking:['https://www.google.com/maps/search/parking+Odori+Park+Sapporo'],imgs:[u('Odori Park winter'),u('Sapporo TV Tower winter'),u('Sapporo winter festival'),u('snow festival illumination'),u('Sapporo park snow'),u('Sapporo skyline snow')]}
    ],
    dining:[{zh:'æˆå‰æ€æ±— ã ã‚‹ã¾',en:'Daruma Genghis Khan',map:'https://maps.google.com/?q=Daruma+Genghis+Khan+Sapporo'}]
  },
  {id:5,icon:'cart',color:'c5',zh:'Day 5 å°æ¨½ä¸€æ—¥',en:'Otaru Day',place:{name:'å°æ¨½',lat:43.1907,lon:141.0028},
    sights:[
      {id:'canal',zh:'å°æ¨½é‹æ²³',en:'Otaru Canal',map:'https://maps.google.com/?q=Otaru+Canal',parking:['https://www.google.com/maps/search/parking+Otaru+Canal'],imgs:[u('Otaru canal winter'),u('Otaru night canal'),u('Otaru snow street'),u('Otaru gas lamps'),u('Otaru historic warehouse'),u('Otaru winter town')]},
      {id:'musicbox',zh:'å°æ¨½éŸ³æ¨‚ç›’å ‚',en:'Otaru Music Box Museum',map:'https://maps.google.com/?q=Otaru+Music+Box+Museum',parking:['https://www.google.com/maps/search/parking+Otaru+Music+Box+Museum'],imgs:[u('Otaru music box museum'),u('music box shop japan'),u('glassware otaru'),u('Victorian shop japan'),u('handmade music box'),u('Otaru souvenir shop')]},
      {id:'sankaku',zh:'ä¸‰è§’å¸‚å ´',en:'Sankaku Market',map:'https://maps.google.com/?q=Otaru+Sankaku+Market',parking:['https://www.google.com/maps/search/parking+Otaru+Sankaku+Market'],imgs:[u('Otaru seafood market'),u('Hokkaido sushi market'),u('Otaru crab market'),u('seafood bowl otaru'),u('fresh crab Hokkaido'),u('otaru fish market')]},
      {id:'tengu',zh:'å¤©ç‹—å±±çºœè»Šå¤œæ™¯',en:'Mt. Tengu Ropeway',map:'https://maps.google.com/?q=Mt+Tengu+Ropeway',parking:['https://www.google.com/maps/search/parking+Mt+Tengu+Ropeway'],imgs:[u('Otaru night view'),u('Tenguyama ropeway'),u('Otaru city lights winter'),u('ropeway japan winter'),u('mountain night japan'),u('Otaru panorama')]}
    ],
    dining:[{zh:'æ”¿å£½å¸',en:'Masazushi',map:'https://maps.google.com/?q=Masazushi+Otaru'}]
  },
  {id:6,icon:'cat',color:'c6',zh:'Day 6 æœ­å¹Œä¼‘é–’è³¼ç‰©',en:'Leisure & Shopping',place:{name:'æœ­å¹Œ',lat:43.0618,lon:141.3545},
    sights:[
      {id:'outlets',zh:'åŒ—å»£å³¶ ä¸‰äº• OUTLET',en:'Mitsui Outlet Park',map:'https://maps.google.com/?q=Mitsui+Outlet+Park+Kitahiroshima',parking:['https://www.google.com/maps/search/parking+Mitsui+Outlet+Park+Kitahiroshima'],imgs:[u('outlet mall winter'),u('shopping mall japan'),u('Hokkaido mall'),u('mall interior japan'),u('shopping people winter'),u('outlet shopping')]},
      {id:'maruyama',zh:'åŒ—æµ·é“ç¥å®®ï¼‹åœ“å±±å…¬åœ’',en:'Hokkaido Shrine + Maruyama',map:'https://maps.google.com/?q=Hokkaido+Shrine',parking:['https://www.google.com/maps/search/parking+Hokkaido+Shrine'],imgs:[u('Hokkaido Shrine winter torii'),u('shrine snow japan'),u('Maruyama Park snow'),u('Sapporo shrine winter'),u('Japanese shrine winter'),u('snowy torii gate')]}
    ],
    dining:[{zh:'é¹½å…ƒå¸¥ æœ­å¹Œ',en:'Shio Gensui',map:'https://maps.google.com/?q=Shio+Gensui+Sapporo'}]
  },
  {id:7,icon:'fatcat',color:'c7',zh:'Day 7 å®¶åº­ä¼‘é–’ï¼è²“è²“æ—¥',en:'Family & Cats',place:{name:'æœ­å¹Œ',lat:43.0618,lon:141.3545},
    sights:[
      {id:'catcafe',zh:'è²“å’–å•¡ï¼ˆç¤ºä¾‹ï¼‰',en:'Cat CafÃ©',map:'https://maps.google.com/?q=Cat+Cafe+Sapporo',parking:['https://www.google.com/maps/search/parking+Sapporo+Cat+Cafe'],imgs:[u('cat cafe japan'),u('cute cat cafe'),u('cat latte'),u('cat sleeping cafe'),u('cat cafe interior'),u('cat toys cafe')]},
      {id:'drug',zh:'è—¥å¦ï¼é©šå®‰ä¹‹æ®¿å ‚',en:'Drugstores / Donki',map:'https://maps.google.com/?q=Don+Quijote+Sapporo',parking:['https://www.google.com/maps/search/parking+Don+Quijote+Sapporo'],imgs:[u('Don Quijote Sapporo'),u('drugstore japan'),u('shopping japan night'),u('sapporo neon'),u('retail japan'),u('souvenir shopping japan')]}
    ],
    dining:[{zh:'æˆå‰æ€æ±— è’™å¤çƒ¤è‚‰',en:'Genghis Khan BBQ',map:'https://maps.google.com/?q=Genghis+Khan+BBQ+Sapporo'}]
  },
  {id:8,icon:'onsen',color:'c8',zh:'Day 8 ç™»åˆ¥æº«æ³‰å€',en:'Noboribetsu Onsen',place:{name:'ç™»åˆ¥',lat:42.4124,lon:141.1069},
    sights:[
      {id:'jigoku',zh:'åœ°ç„è°·',en:'Jigokudani',map:'https://maps.google.com/?q=Noboribetsu+Jigokudani',parking:['https://www.google.com/maps/search/parking+Jigokudani+Noboribetsu'],imgs:[u('Noboribetsu Hell Valley winter'),u('Jigokudani steam'),u('Noboribetsu winter path'),u('steam valley japan winter'),u('hot spring valley snow'),u('sulfur valley Hokkaido')]},
      {id:'oyunuma',zh:'å¤§æ¹¯æ²¼ï¼å¥§ä¹‹æ¹¯',en:'Oyunuma / Okunoyu',map:'https://maps.google.com/?q=Oyunuma+Noboribetsu',parking:['https://www.google.com/maps/search/parking+Oyunuma+Noboribetsu'],imgs:[u('Oyunuma Noboribetsu winter'),u('Okunoyu Noboribetsu'),u('hot spring pond steam'),u('wooden path hot spring'),u('blue pond hot spring japan'),u('Noboribetsu forest snow')]},
      {id:'onsenst',zh:'æº«æ³‰è¡—ï¼æ³‰æºå…¬åœ’',en:'Onsen Street / Gensen Park',map:'https://maps.google.com/?q=Gensen+Park+Noboribetsu',parking:['https://www.google.com/maps/search/parking+Gensen+Park+Noboribetsu'],imgs:[u('Noboribetsu onsen street winter'),u('onsen town steam'),u('hot spring town japan winter'),u('Noboribetsu lanterns'),u('snowy onsen town'),u('Hokkaido onsen street')]}
    ],
    dining:[{zh:'æ—…é¤¨æ™šé¤ï¼ˆç¤ºä¾‹ï¼‰',en:'Ryokan Dinner',map:'https://maps.google.com/?q=Noboribetsu+Ryokan'}]
  },
  {id:9,icon:'plane',color:'c9',zh:'Day 9 è¿”ç¨‹',en:'Fly Home',place:{name:'æ–°åƒæ­²',lat:42.7752,lon:141.6923},
    sights:[{id:'fly',zh:'æœ­å¹Œ â†’ æ–°åƒæ­²æ©Ÿå ´',en:'Sapporo â†’ CTS',map:'https://maps.google.com/?q=New+Chitose+Airport',parking:['https://www.google.com/maps/search/parking+New+Chitose+Airport'],imgs:[u('New Chitose Airport winter'),u('airport Hokkaido snow'),u('airport tarmac snow'),u('airport terminal japan'),u('winter travel airport'),u('Hokkaido airplane')]}],
    dining:[]
  }
];

function qs(s,root=document){return root.querySelector(s)}; function ce(tag){return document.createElement(tag)};

function buildStickers(){
  const wrap=qs('#stickers'); wrap.innerHTML='';
  DAYS.forEach(d=>{
    const a=ce('a'); a.href='#day'+d.id; a.className='sticker';
    const plate=ce('div'); plate.className='plate '+d.color; plate.innerHTML=ICONS[d.icon];
    const label=ce('div'); label.className='label'; label.textContent=d.zh;
    a.appendChild(plate); a.appendChild(label); wrap.appendChild(a);
  });
}

function buildSections(){
  const wrap=qs('#sections'); wrap.innerHTML='';
  DAYS.forEach(d=>{
    const sec=ce('section'); sec.className='section'; sec.id='day'+d.id;
    const back=ce('a'); back.className='back'; back.href='#home'; back.textContent=(currentLang==='en'?'â† Back to Home':'â† è¿”å›é¦–é ');
    const hero=ce('div'); hero.className='hero'; const inner=ce('div'); inner.className='inner';
    const h2=ce('h2'); h2.textContent=currentLang==='en'?d.en:d.zh; inner.appendChild(h2);

    const wx=ce('div'); wx.className='wx';
    const place=(currentLang==='en'?d.place.name.replace('/',' & '):d.place.name);
    wx.innerHTML=`<div class="t">${place} ${currentLang==='en'?'Weather':'å¤©æ°£'}ï¼ˆDay ${d.id}ï¼‰</div>
    <small id="wx-${d.id}-date">â€”</small>
    <div class="item"><b>${currentLang==='en'?'Condition':'ç‹€æ³'}</b><div class="v" id="w${d.id}-cond">â€”</div></div>
    <div class="item"><b>${currentLang==='en'?'Max/Min':'æœ€é«˜/æœ€ä½'}</b><div class="v"><span id="w${d.id}-tmax">â€”</span>/<span id="w${d.id}-tmin">â€”</span> Â°C</div></div>
    <div class="item"><b>${currentLang==='en'?'Precip':'é™æ°´'}</b><div class="v" id="w${d.id}-pop">â€”%</div></div>
    <div class="item"><b>${currentLang==='en'?'Wind':'é¢¨'}</b><div class="v"><span id="w${d.id}-wspd">â€”</span> km/h Â· <span id="w${d.id}-wdir">â€”</span></div></div>`;
    inner.appendChild(wx);

    const row=ce('div'); row.className='row';
    const c1=ce('div'); c1.className='card';
    const h21=ce('h2'); h21.textContent=currentLang==='en'?'Sights & Parking':'æ™¯é»èˆ‡åœè»Š'; c1.appendChild(h21);
    const ul=ce('ul'); ul.className='kv';
    d.sights.forEach(s=>{
      const li=ce('li');
      const aMap=ce('a'); aMap.target='_blank'; aMap.href=s.map; aMap.textContent=currentLang==='en'?s.en:s.zh; li.appendChild(aMap);
      s.parking.forEach((p,i)=>{ const sep=document.createTextNode(' Â· '); li.appendChild(sep); const a=ce('a'); a.target='_blank'; a.href=p; a.textContent=(currentLang==='en'?'Parking':'åœè»Š')+(s.parking.length>1?(' '+(i+1)):''); li.appendChild(a); });
      const sep2=document.createTextNode(' Â· '); li.appendChild(sep2);
      const aGal=ce('a'); aGal.href='#spot/'+s.id; aGal.textContent=currentLang==='en'?'ğŸ“· Gallery':'ğŸ“· åœ–é›†'; li.appendChild(aGal);
      (s.imgs||[]).slice(0,2).forEach(src=>{ const timg=ce('img'); timg.loading='lazy'; timg.className='thumb'; timg.src=src; timg.alt=s.zh; const link=ce('a'); link.href='#spot/'+s.id; link.appendChild(timg); li.appendChild(link); });
      ul.appendChild(li);
    });
    c1.appendChild(ul);

    const c2=ce('div'); c2.className='card';
    const h22=ce('h2'); h22.textContent=currentLang==='en'?'Dining Maps':'é¤å»³åœ°åœ–'; c2.appendChild(h22);
    const ul2=ce('ul'); ul2.className='kv'; (d.dining||[]).forEach(r=>{ const li=ce('li'); const a=ce('a'); a.target='_blank'; a.href=r.map; a.textContent = currentLang==='en'?(r.en||r.zh):(r.zh); li.appendChild(a); ul2.appendChild(li); });
    c2.appendChild(ul2);

    row.appendChild(c1); row.appendChild(c2);
    inner.appendChild(row); hero.appendChild(inner);
    sec.appendChild(back); sec.appendChild(hero); wrap.appendChild(sec);
  });
}

function buildSpotPages(){
  const container=document.body;
  DAYS.forEach(d=>d.sights.forEach(s=>{
    const sec=ce('section'); sec.className='section'; sec.id='spot-'+s.id;
    const back=ce('a'); back.className='back'; back.href='#day'+d.id; back.textContent=(currentLang==='en'?'â† Back to Day ':'â† è¿”å› Day ')+d.id;
    const hero=ce('div'); hero.className='hero'; const inner=ce('div'); inner.className='inner';
    const h2=ce('h2'); h2.textContent=(currentLang==='en'?s.en:s.zh)+' Â· '+(currentLang==='en'?'Gallery (6 photos)':'åœ–é›†ï¼ˆ6 å¼µï¼‰');
    const gal=ce('div'); gal.className='gallery';
    (s.imgs||[]).forEach((src,ix)=>{
      if(src){ const fig=document.createElement('figure'); const img=document.createElement('img'); img.loading='lazy'; img.src=src; img.alt=s.zh; const cap=document.createElement('figcaption'); cap.textContent='Unsplash'; fig.appendChild(img); fig.appendChild(cap); gal.appendChild(fig); }
      else{ const fig=document.createElement('figure'); fig.className='placeholder'; const d=document.createElement('div'); d.textContent=(currentLang==='en'?'To add ':'å¾…è£œ ')+(ix+1); fig.appendChild(d); gal.appendChild(fig); }
    });
    inner.appendChild(h2); inner.appendChild(gal); hero.appendChild(inner);
    sec.appendChild(back); container.appendChild(sec);
  }));
}

function dirText(deg,lang){const zh=['åŒ—','åŒ—åŒ—æ±','åŒ—æ±','æ±åŒ—æ±','æ±','æ±å—æ±','å—æ±','å—å—æ±','å—','å—å—è¥¿','å—è¥¿','è¥¿å—è¥¿','è¥¿','è¥¿åŒ—è¥¿','åŒ—è¥¿','åŒ—åŒ—è¥¿']; const en=['N','NNE','NE','ENE','E','ESE','SE','SSE','S','SSW','SW','WSW','W','WNW','NW','NNW']; const ix=Math.round(deg/22.5)%16; return (lang==='en'?en:zh)[ix];}
function fmt(n){return (n==null||Number.isNaN(n))?'â€”':Math.round(n)}
async function fetchDay(lat,lon,date,lang){const url=`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=weather_code,temperature_2m_max,temperature_2m_min,precipitation_probability_max,wind_speed_10m_max,wind_direction_10m_dominant&timezone=Asia%2FTokyo&start_date=${date}&end_date=${date}`; const r=await fetch(url); const j=await r.json(); const i=0; const code=j.daily.weather_code[i]; const WMO_ZH={0:'æ™´',1:'å¤šé›²(å°‘)',2:'å¤šé›²(é–“æ­‡)',3:'é™°',45:'éœ§',48:'éœ§å‡',51:'æ¯›æ¯›é›¨(è¼•)',53:'æ¯›æ¯›é›¨(ä¸­)',55:'æ¯›æ¯›é›¨(å¼·)',56:'å†°æ¯›æ¯›é›¨(è¼•)',57:'å†°æ¯›æ¯›é›¨(å¼·)',61:'å°é›¨',63:'ä¸­é›¨',65:'å¤§é›¨',66:'å‡é›¨(è¼•)',67:'å‡é›¨(å¼·)',71:'å°é›ª',73:'ä¸­é›ª',75:'å¤§é›ª',77:'é›ªç²’',80:'é™£é›¨(è¼•)',81:'é™£é›¨(ä¸­)',82:'é™£é›¨(å¼·)',85:'é™£é›ª(è¼•)',86:'é™£é›ª(å¼·)',95:'é›·é›¨',96:'é›·é›¨(å°å†°é›¹)',99:'é›·é›¨(å¤§å†°é›¹)'}; const WMO_EN={0:'Clear',1:'Mainly clear',2:'Partly cloudy',3:'Overcast',45:'Fog',48:'Rime fog',51:'Drizzle (light)',53:'Drizzle (moderate)',55:'Drizzle (dense)',56:'Freezing drizzle (light)',57:'Freezing drizzle (dense)',61:'Rain (light)',63:'Rain (moderate)',65:'Rain (heavy)',66:'Freezing rain (light)',67:'Freezing rain (heavy)',71:'Snow (light)',73:'Snow (moderate)',75:'Snow (heavy)',77:'Snow grains',80:'Rain showers (light)',81:'Rain showers (moderate)',82:'Rain showers (violent)',85:'Snow showers (light)',86:'Snow showers (heavy)',95:'Thunderstorm',96:'Thunderstorm (slight hail)',99:'Thunderstorm (heavy hail)'}; const map=lang==='en'?WMO_EN:WMO_ZH; return {cond:map[code]||code,tmax:j.daily.temperature_2m_max[i],tmin:j.daily.temperature_2m_min[i],pop:j.daily.precipitation_probability_max[i],wspd:j.daily.wind_speed_10m_max[i],wdir:j.daily.wind_direction_10m_dominant?.[i]};}
function getDates(){const t=new Date(); const y=t.getFullYear(),m=('0'+(t.getMonth()+1)).slice(-2),d=('0'+t.getDate()).slice(-2); const start=`${y}-${m}-${d}`; const dates=[]; for(let i=0;i<9;i++){const dt=new Date(start); dt.setDate(new Date(start).getDate()+i); dates.push(dt.toISOString().slice(0,10));} return dates;}
async function loadWeather(){const dates=getDates(); document.getElementById('wx-home-date').textContent=dates[0];
  try{const d=await fetchDay(43.0618,141.3545,dates[0],currentLang); document.getElementById('wh-cond').textContent=d.cond; document.getElementById('wh-tmax').textContent=fmt(d.tmax); document.getElementById('wh-tmin').textContent=fmt(d.tmin); document.getElementById('wh-pop').textContent=(d.pop??'â€”')+'%'; document.getElementById('wh-wspd').textContent=fmt(d.wspd); document.getElementById('wh-wdir').textContent=d.wdir!=null?dirText(d.wdir,currentLang):'â€”'; }catch(e){ document.getElementById('wh-cond').textContent=currentLang==='en'?'Failed':'ç„¡æ³•å–å¾—'; }
  for(const day of DAYS){ const boxDate=document.getElementById(`wx-${day.id}-date`); if(!boxDate) continue; boxDate.textContent=dates[day.id-1]; try{const d=await fetchDay(day.place.lat,day.place.lon,dates[day.id-1],currentLang); document.getElementById(`w${day.id}-cond`).textContent=d.cond; document.getElementById(`w${day.id}-tmax`).textContent=fmt(d.tmax); document.getElementById(`w${day.id}-tmin`).textContent=fmt(d.tmin); document.getElementById(`w${day.id}-pop`).textContent=(d.pop??'â€”')+'%'; document.getElementById(`w${day.id}-wspd`).textContent=fmt(d.wspd); document.getElementById(`w${day.id}-wdir`).textContent=d.wdir!=null?dirText(d.wdir,currentLang):'â€”'; }catch(e){ document.getElementById(`w${day.id}-cond`).textContent=currentLang==='en'?'Failed':'ç„¡æ³•å–å¾—'; } }
}

function updateMode(){const hash=location.hash||'#home'; if(hash==='#home'||hash==='#'||hash===''){ showOnly(null); } else if(hash.startsWith('#day')){ showOnly(hash.substring(1)); } else if(hash.startsWith('#spot/')){ const sid=hash.split('/')[1]; showOnly('spot-'+sid); } }
function showOnly(id){ const secs=[...document.querySelectorAll('.section')]; secs.forEach(s=>{ s.style.display = (!id && s.id) ? 'none' : (s.id===id?'block':'none'); }); if(!id){ qs('#stickers').style.display='grid'; } else { qs('#stickers').style.display='none'; } }
window.addEventListener('hashchange',updateMode);

const elAudio=document.getElementById('bgm'), btnAudio=document.getElementById('bgm-toggle');
btnAudio.addEventListener('click',async()=>{
  if(elAudio.paused){ try{ await elAudio.play(); btnAudio.textContent='â¸ï¸ æš«åœéŸ³æ¨‚'; }catch(e){ alert('éœ€è¦ä½ é»æ“Šä¸€æ¬¡æ‰å¯æ’­æ”¾éŸ³æ¨‚'); } }
  else{ elAudio.pause(); btnAudio.textContent='â–¶ï¸ æ’­æ”¾éŸ³æ¨‚'; }
});
document.getElementById('snow-toggle').addEventListener('click',()=>{ const s=qs('#snow'); s.classList.toggle('on'); document.getElementById('snow-toggle').textContent = s.classList.contains('on')?'â„ï¸ é£„é›ªï¼šé–‹':'â„ï¸ é£„é›ªï¼šé—œ'; });

document.getElementById('btn-zh').addEventListener('click',()=>{ currentLang='zh'; buildSections(); buildSpotPages(); updateMode(); loadWeather(); document.getElementById('btn-zh').classList.add('on'); document.getElementById('btn-en').classList.remove('on'); });
document.getElementById('btn-en').addEventListener('click',()=>{ currentLang='en'; buildSections(); buildSpotPages(); updateMode(); loadWeather(); document.getElementById('btn-en').classList.add('on'); document.getElementById('btn-zh').classList.remove('on'); });

function init(){ buildStickers(); buildSections(); buildSpotPages(); updateMode(); loadWeather(); document.getElementById('snow').classList.add('on'); }
init();
</script>
</body>
</html>
