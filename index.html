<!doctype html>
<html lang="zh-HK">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>åŒ—æµ·é“ä¹‹æ—… Â· è©³ç´°ï¼‹å¤©æ°£ï¼ˆå¡é€šç‰ˆï¼‰</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600;700;800&family=Zen+Maru+Gothic:wght@500;700&display=swap" rel="stylesheet">
<style>
:root{
  --ink:#0a1424; --muted:#4a5f78; --ring:#00000026; --paper:#fffdf9; --r:26px;
  --pink1:#ff8fb1; --pink2:#ffd1e6;
  --wxbg:#e8f2ff; --wxline:#cde0ff; --wxcard:#ffffff;
}
*{box-sizing:border-box}
body{
  margin:0; color:var(--ink);
  font-family: "Baloo 2","Zen Maru Gothic", ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Inter, "PingFang HK","Noto Sans JP", Helvetica, Arial, sans-serif;
  background:
    radial-gradient(1200px 800px at 10% -10%, #2a1a12 0%, #2e1c13 30%, #331f15 60%) no-repeat,
    linear-gradient(180deg,#3b2419 0%, #3a2317 40%, #42271a 100%);
  overflow-x:hidden;
  color:#f2e9e2;
}
/* Sakura header */
header{
  position:sticky; top:0; z-index:10;
  background: linear-gradient(180deg,var(--pink1),var(--pink2));
  border-bottom:2px solid #ffd6e8;
  box-shadow: 0 8px 18px #00000024;
}
header:before{
  content:""; position:absolute; inset:0; pointer-events:none; opacity:.35;
  background:
    radial-gradient(16px 12px at 8% 40%, #fff, #0000 70%),
    radial-gradient(12px 8px at 14% 48%, #fff, #0000 70%),
    radial-gradient(16px 12px at 22% 42%, #fff, #0000 70%),
    radial-gradient(10px 8px at 86% 36%, #fff, #0000 70%),
    radial-gradient(16px 12px at 78% 46%, #fff, #0000 70%);
  filter: blur(1px);
}
.bar{
  max-width:1000px;margin:0 auto;padding:12px 14px;display:flex;align-items:center;gap:10px;justify-content:space-between
}
h1{
  margin:0;font-size:22px;letter-spacing:.3px;color:#4a1a2a;
  text-shadow:0 2px 0 #ffffffa8, 0 6px 16px #ff9ec244;
}
.small{color:#5e6f86;font-size:12px}
.lang{display:flex; gap:8px; align-items:center}
.lang button{border:2px solid #ffe0ec;background:#fff;border-radius:12px;padding:6px 10px;box-shadow:0 6px 12px #00000012;font-weight:800}
.lang .on{background:#ffe8f2}

main{max-width:1000px;margin:12px auto 100px;padding:0 12px; position:relative; z-index:1}

/* HOME manga background (non-copyright abstract silhouettes) */
.manga-bg{
  position:fixed; inset:0; pointer-events:none; z-index:0; opacity:.16;
  background:
    radial-gradient(300px 420px at 15% 65%, #000000 0 60%, #0000 61%),
    radial-gradient(280px 360px at 82% 60%, #000000 0 60%, #0000 61%),
    radial-gradient(220px 280px at 55% 80%, #000000 0 60%, #0000 61%);
  mix-blend-mode:overlay;
}

/* Staggered glass buttons */
.grid{position:relative; display:grid;grid-template-columns:1fr;gap:18px; margin-top:10px; z-index:1}
.btn{
  position:relative; display:flex; align-items:center; justify-content:space-between; gap:12px;
  text-decoration:none; color:#fff; padding:18px 16px; border-radius:28px;
  background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.08));
  border:1px solid rgba(255,255,255,.28);
  backdrop-filter: blur(10px);
  box-shadow: 0 18px 26px -10px #00000070, inset 0 0 0 1px rgba(255,255,255,.25);
  font-weight:900; font-size:18px; overflow:hidden
}
.btn .left{display:flex;align-items:center;gap:12px}
.emoji{font-size:24px; filter: drop-shadow(0 2px 2px #00000060)}
.chev{font-weight:900; width:36px; height:36px; border-radius:12px; display:grid; place-items:center;
  background:rgba(255,255,255,.25); border:1px solid rgba(255,255,255,.35); color:#fff; box-shadow:0 8px 16px #00000050}
.tag{font-size:12px; padding:6px 10px; border-radius:999px; background:rgba(0,0,0,.25); border:1px solid rgba(255,255,255,.28); color:#ffeede}
.btn i.ear, .btn i.ear2{position:absolute; top:-12px; width:18px; height:18px; background:#fff3; border:2px solid #fff5; transform:rotate(45deg)}
.btn i.ear{left:16px} .btn i.ear2{left:38px}
.btn::after{content:""; position:absolute; inset:-4px; border-radius:36px; mix-blend-mode: screen; pointer-events:none; box-shadow: inset 0 0 220px 60px rgba(255,156,105,.22)}
.decor{position:absolute; right:-12px; bottom:-10px; width:150px; height:150px; opacity:.28}
.grid a:nth-child(odd){transform: translateX(8px) rotate(-1.2deg)}
.grid a:nth-child(even){transform: translateX(-8px) rotate(1.2deg)}

/* Weather cards (blue) */
.homebar{display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin:10px 0 14px}
.homebar .input{display:flex; align-items:center; gap:6px; border:1px solid #6da9ff; border-radius:12px; padding:6px 10px; background:#1f2b44; color:#dbe8ff}
.homebar input[type="date"]{background:transparent; color:#dbe8ff; border:0; outline:none}

.wx{margin:8px 0 12px; padding:10px; border:1px solid var(--wxline); border-radius:16px; background:#17325a;
  display:flex; flex-wrap:wrap; gap:8px; align-items:center; box-shadow:0 10px 18px #00000050; color:#e9f2ff}
.wx .t{font-weight:900}
.wx small{color:#b9d1ff}
.wx .item{flex:1 1 160px; background:#0e2442; border:1px dashed #2b5aa8; border-radius:12px; padding:8px; color:#e9f2ff}
.wx .item b{font-size:12px; color:#bfd6ff}
.wx .v{font-size:18px; font-weight:800}

/* Detail pages are light for readability */
.section{display:none; margin-top:18px; color:#0b2240}
.section:target{display:block}
body.detail-mode{background:
  radial-gradient(1400px 700px at 10% -10%, #eaf4ff 0%, #f6fbff 36%, #ffffff 70%) no-repeat,
  linear-gradient(180deg,#eef8ff,#ffffff 26%, #ffffff 100%);
  color:#0b2240;
}

.hero{
  position:relative; border-radius: var(--r);
  border:1px solid #dbe3f0; background:#fff; overflow:hidden;
  box-shadow:0 24px 36px var(--ring), inset 0 0 0 2px #ffffffd9, inset 0 18px 28px #ffffffb8;
}
.hero .inner{padding:14px}
.row{display:grid; gap:12px; grid-template-columns:1fr}
.card{
  position:relative; background: var(--paper);
  border:1px solid #e6e1d5; border-radius: 22px;
  box-shadow: 0 18px 30px var(--ring), inset 0 0 0 2px #ffffffd0, inset 0 18px 28px #ffffffa0;
  padding:12px;
}
.card h2{margin:4px 0 6px; font-size:18px}
.muted{color:#5a6a7e; margin:0 0 8px}
.kv{font-size:13px; color:#2b3a52}
details{background: radial-gradient(180% 120% at 50% 0%, #ffffff 0 50%, #fff7f2 100%); border:1px solid #e6e1d5; border-radius:16px; padding:10px;
  box-shadow: 0 12px 20px var(--ring), inset 0 0 0 1px #ffffffd0, inset 0 18px 26px #ffffffc0, inset 0 -10px 20px #ffe7d0}
summary{font-weight:900; cursor:pointer}
.hr{height:1px;background:linear-gradient(90deg,#0000,#dfe9f5,#0000);margin:8px 0}

/* Audio controls */
.controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap;justify-content:flex-end;margin-bottom:4px}
.controls input[type="file"]{font-size:12px}
.controls .btn{border:1px solid #dbe3f0;background:#fff;border-radius:12px;padding:8px 12px;box-shadow:0 6px 12px #00000012;font-weight:800}
.controls .vol{display:flex;align-items:center;gap:6px}
.controls input[type="range"]{width:120px}
.back{display:inline-block;margin:8px 0 0; text-decoration:none; color:#0b2240; border:1px solid #dbe3f0; background:#fff; padding:8px 12px; border-radius:12px; box-shadow:0 6px 10px #00000010}

/* Snow */
.snow, .snow:before, .snow:after{
  position:fixed; pointer-events:none; top:0; left:0; right:0; bottom:0; content:"";
  background-image:
    radial-gradient(2px 2px at 20px 30px, #fff3, #fff0),
    radial-gradient(3px 3px at 80px 120px, #fff5, #fff0),
    radial-gradient(2px 2px at 180px 90px, #fff7, #fff0),
    radial-gradient(2px 2px at 320px 40px, #fff6, #fff0),
    radial-gradient(3px 3px at 460px 140px, #fff8, #fff0);
  background-repeat:repeat;
  animation: snow 24s linear infinite;
  opacity:.85; z-index:0; display:none;
}
.snow.on, .snow.on:before, .snow.on:after{display:block}
.snow:before{animation-duration: 36s; opacity:.65}
.snow:after{animation-duration: 18s; opacity:.95}
@keyframes snow{ from{transform:translateY(-10vh)} to{transform:translateY(10vh)} }

@media (min-width:640px){ .row{grid-template-columns:repeat(2,1fr)} }
</style>
</head>
<body>
<div class="manga-bg" aria-hidden="true"></div>
<div id="snow" class="snow" aria-hidden="true"></div>

<header>
  <div class="bar">
    <h1 class="i18n" data-zh="åŒ—æµ·é“ä¹‹æ—… Â· è©³ç´°ï¼‹å¤©æ°£ï¼ˆå¡é€šç‰ˆï¼‰" data-en="Hokkaido Road Trip Â· Details + Weather (Cartoon)">åŒ—æµ·é“ä¹‹æ—… Â· è©³ç´°ï¼‹å¤©æ°£ï¼ˆå¡é€šç‰ˆï¼‰</h1>
    <div class="lang">
      <span class="small i18n" data-zh="èªè¨€ Languageï¼š" data-en="Language èªè¨€ï¼š">èªè¨€ Languageï¼š</span>
      <button id="btn-zh" class="on">ä¸­æ–‡</button>
      <button id="btn-en">English</button>
    </div>
  </div>
</header>

<main>
  <!-- HOME: start date + Sapporo weather bar -->
  <div class="homebar" id="homebar">
    <div class="input">
      <span class="small i18n" data-zh="å‡ºç™¼æ—¥æœŸ" data-en="Start Date">å‡ºç™¼æ—¥æœŸ</span>
      <input id="start" type="date" placeholder="2025-08-12">
    </div>
    <div class="wx" id="wx-home">
      <div class="t i18n" data-zh="æœ­å¹Œ å¤©æ°£ï¼ˆDay 1ï¼‰" data-en="Sapporo Weather (Day 1)">æœ­å¹Œ å¤©æ°£ï¼ˆDay 1ï¼‰</div>
      <small id="wx-home-date">â€”</small>
      <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="wh-cond">â€”</div></div>
      <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="wh-tmax">â€”</span> / <span id="wh-tmin">â€”</span> Â°C</div></div>
      <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="wh-pop">â€”%</div></div>
      <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="wh-wspd">â€”</span> km/h Â· <span id="wh-wdir">â€”</span></div></div>
    </div>
  </div>

  <!-- HOME buttons -->
  <div class="grid" id="home">
    <a class="btn" href="#day1"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">ğŸ›¬</span><span class="i18n" data-zh="Day 1 æŠµé”æœ­å¹Œ Â· ä½å®¿" data-en="Day 1 Arrival Sapporo Â· Stay">Day 1 æŠµé”æœ­å¹Œ Â· ä½å®¿</span></div><span class="tag i18n" data-zh="CTSâ†’æœ­å¹Œ" data-en="CTSâ†’Sapporo">CTSâ†’æœ­å¹Œ</span><span class="chev">â€º</span></a>
    <a class="btn" href="#day2"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">ğŸ¦€</span><span class="i18n" data-zh="Day 2 å ´å¤–å¸‚å ´ï¼‹ç©é›ª" data-en="Day 2 Seafood Market + Snow Fun">Day 2 å ´å¤–å¸‚å ´ï¼‹ç©é›ª</span></div><span class="tag i18n" data-zh="èŸ¹ Ã— æ»é‡éˆ´è˜­" data-en="Crab Ã— Takino">èŸ¹ Ã— æ»é‡éˆ´è˜­</span><span class="chev">â€º</span></a>
    <a class="btn" href="#day3"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">ğŸ§</span><span class="i18n" data-zh="Day 3 æ—­å±±ï¼‹ç¾ç‘›ï¼‹ç²¾éˆéœ²å°" data-en="Day 3 Asahiyama + Biei + Ningle Terrace">Day 3 æ—­å±±ï¼‹ç¾ç‘›ï¼‹ç²¾éˆéœ²å°</span></div><span class="tag i18n" data-zh="é•·é€”æ—¥" data-en="Long Drive">é•·é€”æ—¥</span><span class="chev">â€º</span></a>
    <a class="btn" href="#day4"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">ğŸ«</span><span class="i18n" data-zh="Day 4 æœ­å¹Œè¼•é¬†æ—¥" data-en="Day 4 Easy Sapporo Day">Day 4 æœ­å¹Œè¼•é¬†æ—¥</span></div><span class="tag i18n" data-zh="ç™½è‰²æˆ€äººÂ·ç¥å®®" data-en="Shiroi Koibito Â· Shrine">ç™½è‰²æˆ€äººÂ·ç¥å®®</span><span class="chev">â€º</span></a>
    <a class="btn" href="#day5"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">ğŸ®</span><span class="i18n" data-zh="Day 5 å°æ¨½ä¸€æ—¥éŠ" data-en="Day 5 Otaru Day Trip">Day 5 å°æ¨½ä¸€æ—¥éŠ</span></div><span class="tag i18n" data-zh="é‹æ²³Â·å¤©ç‹—å±±" data-en="Canal Â· Tenguyama">é‹æ²³Â·å¤©ç‹—å±±</span><span class="chev">â€º</span></a>
    <a class="btn" href="#day6"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">â„ï¸</span><span class="i18n" data-zh="Day 6 æ”¯ç¬æ¹–ï¼‹Outlet" data-en="Day 6 Lake Shikotsu + Outlet">Day 6 æ”¯ç¬æ¹–ï¼‹Outlet</span></div><span class="tag i18n" data-zh="æ¹–æ™¯Â·è³¼ç‰©" data-en="Lake Â· Shopping">æ¹–æ™¯Â·è³¼ç‰©</span><span class="chev">â€º</span></a>
    <a class="btn" href="#day7"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">ğŸ§–</span><span class="i18n" data-zh="Day 7 æœ­å¹ŒChill" data-en="Day 7 Sapporo Chill">Day 7 æœ­å¹ŒChill</span></div><span class="tag i18n" data-zh="å®šå±±æºªÂ·å¤œæ™¯" data-en="Jozankei Â· Night View">å®šå±±æºªÂ·å¤œæ™¯</span><span class="chev">â€º</span></a>
    <a class="btn" href="#day8"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">â™¨ï¸</span><span class="i18n" data-zh="Day 8 ç™»åˆ¥ä½å®¿ï¼ˆç™»åˆ¥å‘¨é‚Šï¼‰" data-en="Day 8 Noboribetsu Stay (Area)">Day 8 ç™»åˆ¥ä½å®¿ï¼ˆç™»åˆ¥å‘¨é‚Šï¼‰</span></div><span class="tag i18n" data-zh="åœ°ç„è°·Â·å¤§æ¹¯æ²¼Â·æº«æ³‰è¡—" data-en="Jigokudani Â· Oyunuma Â· Onsen Street">åœ°ç„è°·Â·å¤§æ¹¯æ²¼Â·æº«æ³‰è¡—</span><span class="chev">â€º</span></a>
    <a class="btn" href="#day9"><i class="ear"></i><i class="ear2"></i><span class="decor"></span><div class="left"><span class="emoji">âœˆï¸</span><span class="i18n" data-zh="Day 9 è¿”ç¨‹" data-en="Day 9 Departure">Day 9 è¿”ç¨‹</span></div><span class="tag i18n" data-zh="ç™»åˆ¥â†’CTS" data-en="Noboribetsuâ†’CTS">ç™»åˆ¥â†’CTS</span><span class="chev">â€º</span></a>
  </div>

  <!-- Detail: Day8 as full example -->
  <section class="section" id="day8">
    <a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero"><div class="inner">
        <div class="wx">
          <div class="t i18n" data-zh="ç™»åˆ¥ å¤©æ°£ï¼ˆDay 8ï¼‰" data-en="Noboribetsu Weather (Day 8)">ç™»åˆ¥ å¤©æ°£ï¼ˆDay 8ï¼‰</div>
          <small id="wx-8-date">â€”</small>
          <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w8-cond">â€”</div></div>
          <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w8-tmax">â€”</span> / <span id="w8-tmin">â€”</span> Â°C</div></div>
          <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w8-pop">â€”%</div></div>
          <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w8-wspd">â€”</span> km/h Â· <span id="w8-wdir">â€”</span></div></div>
        </div>

        <h2 class="i18n" data-zh="Day 8 ç™»åˆ¥å‘¨é‚Š Â· Combo A" data-en="Day 8 Noboribetsu Area Â· Combo A">Day 8 ç™»åˆ¥å‘¨é‚Š Â· Combo A</h2>
        <p class="muted i18n" data-zh="å‡ºç™¼ï¼šæœ­å¹Œ 08:30 Â· åœ°ç„è°· â†’ å¤§æ¹¯æ²¼/å¥§ä¹‹æ¹¯ â†’ æº«æ³‰è¡—ï¼‹æ³‰æºå…¬åœ’è¶³æ¹¯ Â· å…¥ä½ï¼šç¬¬ä¸€æ»æœ¬é¤¨"
           data-en="Depart: Sapporo 08:30 Â· Jigokudani â†’ Oyunuma/Okunoyu â†’ Onsen Street + Gensen Park Footbath Â· Stay: Daiâ€‘ichi Takimotokan">
           å‡ºç™¼ï¼šæœ­å¹Œ 08:30 Â· åœ°ç„è°· â†’ å¤§æ¹¯æ²¼/å¥§ä¹‹æ¹¯ â†’ æº«æ³‰è¡—ï¼‹æ³‰æºå…¬åœ’è¶³æ¹¯ Â· å…¥ä½ï¼šç¬¬ä¸€æ»æœ¬é¤¨</p>
        <div class="row">
          <div class="card">
            <h2 class="i18n" data-zh="äº¤é€šé‡Œç¨‹ï¼ˆå†¬å­£ä¼°ç®—ï¼‰" data-en="Driving (winter estimate)">äº¤é€šé‡Œç¨‹ï¼ˆå†¬å­£ä¼°ç®—ï¼‰</h2>
            <details open><summary class="i18n" data-zh="æœ­å¹Œ â†’ åœ°ç„è°·ï¼ˆç´„ 115â€“120â€¯km / 1â€¯h40â€“1â€¯h50ï¼‰" data-en="Sapporo â†’ Jigokudani (â‰ˆ115â€“120â€¯km / 1h40â€“1h50)">æœ­å¹Œ â†’ åœ°ç„è°·ï¼ˆç´„ 115â€“120â€¯km / 1â€¯h40â€“1â€¯h50ï¼‰</summary><div class="kv i18n" data-zh="é“å¤®é“ï¼›é›ªæ³ä¿å®ˆã€‚" data-en="Hokkaido Expressway; add buffer for snow.">é“å¤®é“ï¼›é›ªæ³ä¿å®ˆã€‚</div></details>
            <details><summary class="i18n" data-zh="åœ°ç„è°· â†’ å¤§æ¹¯æ²¼/å¥§ä¹‹æ¹¯ï¼ˆç´„ 3â€“4â€¯km / 10â€¯minï¼‰" data-en="Jigokudani â†’ Oyunuma/Okunoyu (â‰ˆ3â€“4â€¯km / 10â€¯min)">åœ°ç„è°· â†’ å¤§æ¹¯æ²¼/å¥§ä¹‹æ¹¯ï¼ˆç´„ 3â€“4â€¯km / 10â€¯minï¼‰</summary><div class="kv i18n" data-zh="å±±è·¯æ…¢è¡Œï¼›æœ¨é“æ­¥è¡Œã€‚" data-en="Mountain road; boardwalk walking.">å±±è·¯æ…¢è¡Œï¼›æœ¨é“æ­¥è¡Œã€‚</div></details>
            <details><summary class="i18n" data-zh="å¤§æ¹¯æ²¼ â†’ æº«æ³‰è¡—/æ³‰æºå…¬åœ’ï¼ˆç´„ 2â€¯km / 6â€¯minï¼‰" data-en="Oyunuma â†’ Onsen Street/Gensen Park (â‰ˆ2â€¯km / 6â€¯min)">å¤§æ¹¯æ²¼ â†’ æº«æ³‰è¡—/æ³‰æºå…¬åœ’ï¼ˆç´„ 2â€¯km / 6â€¯minï¼‰</summary><div class="kv i18n" data-zh="å‚æ™šçœ‹é–“æ­‡æ³‰ã€‚" data-en="Geyser around dusk is atmospheric.">å‚æ™šçœ‹é–“æ­‡æ³‰ã€‚</div></details>
            <details><summary class="i18n" data-zh="æº«æ³‰è¡— â†’ ç¬¬ä¸€æ»æœ¬é¤¨ï¼ˆç´„ 0.5â€“1â€¯km / 3â€“5â€¯minï¼‰" data-en="Onsen Street â†’ Daiâ€‘ichi Takimotokan (â‰ˆ0.5â€“1â€¯km / 3â€“5â€¯min)">æº«æ³‰è¡— â†’ ç¬¬ä¸€æ»æœ¬é¤¨ï¼ˆç´„ 0.5â€“1â€¯km / 3â€“5â€¯minï¼‰</summary><div class="kv i18n" data-zh="Checkâ€‘in æ³¡æ¹¯ã€‚" data-en="Checkâ€‘in and soak.">Checkâ€‘in æ³¡æ¹¯ã€‚</div></details>
          </div>
          <div class="card">
            <h2 class="i18n" data-zh="ç”¨é¤å»ºè­°" data-en="Meal Suggestions">ç”¨é¤å»ºè­°</h2>
            <details open><summary class="i18n" data-zh="åˆé¤ï¼ˆç™»åˆ¥ï¼‰" data-en="Lunch (Noboribetsu)">åˆé¤ï¼ˆç™»åˆ¥ï¼‰</summary><div class="kv i18n" data-zh="æ³‰äº­ã€å‘³ã®å¤§ç‹ï¼ˆå’–å–±æ‹‰éºµï¼‰ã€‚" data-en="Sentei, Aji no Daio (curry ramen).">æ³‰äº­ã€å‘³ã®å¤§ç‹ï¼ˆå’–å–±æ‹‰éºµï¼‰ã€‚</div></details>
            <details><summary class="i18n" data-zh="ä¸‹åˆèŒ¶" data-en="Tea Break">ä¸‹åˆèŒ¶</summary><div class="kv i18n" data-zh="æº«æ³‰è›‹ã€ç”œé»å°åº—ã€‚" data-en="Onsen eggs, local sweets.">æº«æ³‰è›‹ã€ç”œé»å°åº—ã€‚</div></details>
            <details><summary class="i18n" data-zh="æ™šé¤" data-en="Dinner">æ™šé¤</summary><div class="kv i18n" data-zh="ç¬¬ä¸€æ»æœ¬é¤¨ æœƒå¸­/è‡ªåŠ©ã€‚" data-en="Daiâ€‘ichi Takimotokan kaiseki/buffet.">ç¬¬ä¸€æ»æœ¬é¤¨ æœƒå¸­/è‡ªåŠ©ã€‚</div></details>
            <div class="hr"></div>
            <div class="kv"><b class="i18n" data-zh="ğŸ“ åœ°é» / Places" data-en="ğŸ“ Places">ğŸ“ åœ°é» / Places</b>
              <ul class="kv">
                <li><a target="_blank" rel="noopener" href="https://maps.google.com/?q=Noboribetsu+Jigokudani">åœ°ç„è°· / Jigokudani</a></li>
                <li><a target="_blank" rel="noopener" href="https://maps.google.com/?q=Oyunuma+Noboribetsu">å¤§æ¹¯æ²¼ / Oyunuma</a></li>
                <li><a target="_blank" rel="noopener" href="https://maps.google.com/?q=Gensen+Park+Noboribetsu">æ³‰æºå…¬åœ’</a></li>
                <li><a target="_blank" rel="noopener" href="https://maps.google.com/?q=Dai-ichi+Takimotokan">ç¬¬ä¸€æ»æœ¬é¤¨</a></li>
              </ul>
            </div>
          </div>
        </div>
    </div></div>
  </section>

  <!-- Minimal other days (weather targets only) -->
  <section class="section" id="day1"><a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero"><div class="inner">
      <div class="wx"><div class="t i18n" data-zh="æœ­å¹Œ å¤©æ°£ï¼ˆDay 1ï¼‰" data-en="Sapporo Weather (Day 1)">æœ­å¹Œ å¤©æ°£ï¼ˆDay 1ï¼‰</div><small id="wx-1-date">â€”</small>
        <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w1-cond">â€”</div></div>
        <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w1-tmax">â€”</span> / <span id="w1-tmin">â€”</span> Â°C</div></div>
        <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w1-pop">â€”%</div></div>
        <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w1-wspd">â€”</span> km/h Â· <span id="w1-wdir">â€”</span></div></div>
      </div>
      <h2 class="i18n" data-zh="Day 1 æŠµé”æœ­å¹Œ Â· ä½å®¿" data-en="Day 1 Arrival Sapporo Â· Stay">Day 1 æŠµé”æœ­å¹Œ Â· ä½å®¿</h2>
      <p class="muted i18n" data-zh="CTS â†’ æœ­å¹Œæ°‘å®¿ Â· æ™šä¸Šè¼•é¬†æ•£æ­¥" data-en="CTS â†’ Sapporo stay Â· easy evening walk">CTS â†’ æœ­å¹Œæ°‘å®¿ Â· æ™šä¸Šè¼•é¬†æ•£æ­¥</p>
    </div></div></section>

  <section class="section" id="day2"><a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero"><div class="inner">
      <div class="wx"><div class="t i18n" data-zh="æœ­å¹Œ å¤©æ°£ï¼ˆDay 2ï¼‰" data-en="Sapporo Weather (Day 2)">æœ­å¹Œ å¤©æ°£ï¼ˆDay 2ï¼‰</div><small id="wx-2-date">â€”</small>
        <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w2-cond">â€”</div></div>
        <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w2-tmax">â€”</span> / <span id="w2-tmin">â€”</span> Â°C</div></div>
        <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w2-pop">â€”%</div></div>
        <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w2-wspd">â€”</span> km/h Â· <span id="w2-wdir">â€”</span></div></div>
      </div>
      <h2 class="i18n" data-zh="Day 2 å ´å¤–å¸‚å ´ï¼‹ç©é›ª" data-en="Day 2 Seafood Market + Snow Fun">Day 2 å ´å¤–å¸‚å ´ï¼‹ç©é›ª</h2>
      <p class="muted i18n" data-zh="å ´å¤–å¸‚å ´ â†’ æ»é‡éˆ´è˜­ â†’ ç‹¸å°è·¯" data-en="Curb Market â†’ Takino Snow World â†’ Tanukikoji">å ´å¤–å¸‚å ´ â†’ æ»é‡éˆ´è˜­ â†’ ç‹¸å°è·¯</p>
    </div></div></section>

  <section class="section" id="day3"><a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero"><div class="inner">
      <div class="wx"><div class="t i18n" data-zh="æ—­å· å¤©æ°£ï¼ˆDay 3ï¼‰" data-en="Asahikawa Weather (Day 3)">æ—­å· å¤©æ°£ï¼ˆDay 3ï¼‰</div><small id="wx-3-date">â€”</small>
        <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w3-cond">â€”</div></div>
        <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w3-tmax">â€”</span> / <span id="w3-tmin">â€”</span> Â°C</div></div>
        <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w3-pop">â€”%</div></div>
        <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w3-wspd">â€”</span> km/h Â· <span id="w3-wdir">â€”</span></div></div>
      </div>
      <h2 class="i18n" data-zh="Day 3 æ—­å±±ï¼‹ç¾ç‘›ï¼‹ç²¾éˆéœ²å°" data-en="Day 3 Asahiyama + Biei + Ningle Terrace">Day 3 æ—­å±±ï¼‹ç¾ç‘›ï¼‹ç²¾éˆéœ²å°</h2>
      <p class="muted i18n" data-zh="æ—­å±± â†’ ç¾ç‘› â†’ ç²¾éˆéœ²å°" data-en="Asahiyama â†’ Biei â†’ Ningle Terrace">æ—­å±± â†’ ç¾ç‘› â†’ ç²¾éˆéœ²å°</p>
    </div></div></section>

  <section class="section" id="day4"><a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero"><div class="inner">
      <div class="wx"><div class="t i18n" data-zh="æœ­å¹Œ å¤©æ°£ï¼ˆDay 4ï¼‰" data-en="Sapporo Weather (Day 4)">æœ­å¹Œ å¤©æ°£ï¼ˆDay 4ï¼‰</div><small id="wx-4-date">â€”</small>
        <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w4-cond">â€”</div></div>
        <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w4-tmax">â€”</span> / <span id="w4-tmin">â€”</span> Â°C</div></div>
        <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w4-pop">â€”%</div></div>
        <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w4-wspd">â€”</span> km/h Â· <span id="w4-wdir">â€”</span></div></div>
      </div>
      <h2 class="i18n" data-zh="Day 4 æœ­å¹Œè¼•é¬†æ—¥" data-en="Day 4 Easy Sapporo Day">Day 4 æœ­å¹Œè¼•é¬†æ—¥</h2>
      <p class="muted i18n" data-zh="ç™½è‰²æˆ€äºº â†’ ç¥å®® â†’ é˜æ¨“/é›»è¦–å¡”" data-en="Shiroi Koibito â†’ Hokkaido Shrine â†’ Clock/TV Tower">ç™½è‰²æˆ€äºº â†’ ç¥å®® â†’ é˜æ¨“/é›»è¦–å¡”</p>
    </div></div></section>

  <section class="section" id="day5"><a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero"><div class="inner">
      <div class="wx"><div class="t i18n" data-zh="å°æ¨½ å¤©æ°£ï¼ˆDay 5ï¼‰" data-en="Otaru Weather (Day 5)">å°æ¨½ å¤©æ°£ï¼ˆDay 5ï¼‰</div><small id="wx-5-date">â€”</small>
        <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w5-cond">â€”</div></div>
        <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w5-tmax">â€”</span> / <span id="w5-tmin">â€”</span> Â°C</div></div>
        <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w5-pop">â€”%</div></div>
        <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w5-wspd">â€”</span> km/h Â· <span id="w5-wdir">â€”</span></div></div>
      </div>
      <h2 class="i18n" data-zh="Day 5 å°æ¨½ä¸€æ—¥éŠ" data-en="Day 5 Otaru Day Trip">Day 5 å°æ¨½ä¸€æ—¥éŠ</h2>
      <p class="muted i18n" data-zh="é‹æ²³ â†’ ç»ç’ƒ/éŸ³æ¨‚ç›’ â†’ ä¸‰è§’å¸‚å ´ â†’ å¤©ç‹—å±±" data-en="Canal â†’ Glass/Music Box â†’ Sankaku Market â†’ Mt. Tengu">é‹æ²³ â†’ ç»ç’ƒ/éŸ³æ¨‚ç›’ â†’ ä¸‰è§’å¸‚å ´ â†’ å¤©ç‹—å±±</p>
    </div></div></section>

  <section class="section" id="day6"><a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero"><div class="inner">
      <div class="wx"><div class="t i18n" data-zh="åƒæ­²/æ”¯ç¬æ¹– å¤©æ°£ï¼ˆDay 6ï¼‰" data-en="Chitose/Shikotsu Weather (Day 6)">åƒæ­²/æ”¯ç¬æ¹– å¤©æ°£ï¼ˆDay 6ï¼‰</div><small id="wx-6-date">â€”</small>
        <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w6-cond">â€”</div></div>
        <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w6-tmax">â€”</span> / <span id="w6-tmin">â€”</span> Â°C</div></div>
        <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w6-pop">â€”%</div></div>
        <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w6-wspd">â€”</span> km/h Â· <span id="w6-wdir">â€”</span></div></div>
      </div>
      <h2 class="i18n" data-zh="Day 6 æ”¯ç¬æ¹–ï¼‹Outlet" data-en="Day 6 Lake Shikotsu + Outlet">Day 6 æ”¯ç¬æ¹–ï¼‹Outlet</h2>
      <p class="muted i18n" data-zh="æ”¯ç¬æ¹– â†’ Outlet" data-en="Lake Shikotsu â†’ Outlet">æ”¯ç¬æ¹– â†’ Outlet</p>
    </div></div></section>

  <section class="section" id="day7"><a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero"><div class="inner">
      <div class="wx"><div class="t i18n" data-zh="æœ­å¹Œ å¤©æ°£ï¼ˆDay 7ï¼‰" data-en="Sapporo Weather (Day 7)">æœ­å¹Œ å¤©æ°£ï¼ˆDay 7ï¼‰</div><small id="wx-7-date">â€”</small>
        <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w7-cond">â€”</div></div>
        <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w7-tmax">â€”</span> / <span id="w7-tmin">â€”</span> Â°C</div></div>
        <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w7-pop">â€”%</div></div>
        <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w7-wspd">â€”</span> km/h Â· <span id="w7-wdir">â€”</span></div></div>
      </div>
      <h2 class="i18n" data-zh="Day 7 æœ­å¹ŒChill" data-en="Day 7 Sapporo Chill">Day 7 æœ­å¹ŒChill</h2>
      <p class="muted i18n" data-zh="å®šå±±æºªæ—¥æ­¸ â†’ è—»å²©å±±ï¼ˆå¯é¸ï¼‰" data-en="Jozankei day trip â†’ Mt. Moiwa (optional)">å®šå±±æºªæ—¥æ­¸ â†’ è—»å²©å±±ï¼ˆå¯é¸ï¼‰</p>
    </div></div></section>

  <section class="section" id="day9"><a class="back i18n" href="#home" data-zh="â† è¿”å›é¦–é " data-en="â† Back to Home">â† è¿”å›é¦–é </a>
    <div class="controls"><input class="file" type="file" accept="audio/*"><button class="btn play i18n" data-zh="â–¶ï¸ æ’­æ”¾ / æš«åœ" data-en="â–¶ï¸ Play / Pause">â–¶ï¸ æ’­æ”¾ / æš«åœ</button><div class="vol"><span>ğŸ”Š</span><input class="range" type="range" min="0" max="1" step="0.01" value="0.6"></div><audio class="audio" preload="none" loop></audio></div>
    <div class="hero"><div class="inner">
      <div class="wx"><div class="t i18n" data-zh="åƒæ­² å¤©æ°£ï¼ˆDay 9ï¼‰" data-en="Chitose Weather (Day 9)">åƒæ­² å¤©æ°£ï¼ˆDay 9ï¼‰</div><small id="wx-9-date">â€”</small>
        <div class="item"><b class="i18n" data-zh="ç‹€æ³" data-en="Condition">ç‹€æ³</b> <div class="v" id="w9-cond">â€”</div></div>
        <div class="item"><b class="i18n" data-zh="æœ€é«˜ / æœ€ä½" data-en="Max / Min">æœ€é«˜ / æœ€ä½</b> <div class="v"><span id="w9-tmax">â€”</span> / <span id="w9-tmin">â€”</span> Â°C</div></div>
        <div class="item"><b class="i18n" data-zh="é™æ°´æ©Ÿç‡" data-en="Precip Prob">é™æ°´æ©Ÿç‡</b> <div class="v" id="w9-pop">â€”%</div></div>
        <div class="item"><b class="i18n" data-zh="é¢¨é€Ÿ / é¢¨å‘" data-en="Wind / Dir">é¢¨é€Ÿ / é¢¨å‘</b> <div class="v"><span id="w9-wspd">â€”</span> km/h Â· <span id="w9-wdir">â€”</span></div></div>
      </div>
      <h2 class="i18n" data-zh="Day 9 è¿”ç¨‹" data-en="Day 9 Departure">Day 9 è¿”ç¨‹</h2>
      <p class="muted i18n" data-zh="ç™»åˆ¥ â†’ æ–°åƒæ­²ï¼ˆ16:00 èˆªç­ï¼‰" data-en="Noboribetsu â†’ CTS (16:00 flight)">ç™»åˆ¥ â†’ æ–°åƒæ­²ï¼ˆ16:00 èˆªç­ï¼‰</p>
    </div></div></section>
</main>

<script>
// i18n dictionaries for weather codes and wind dir
let currentLang = 'zh';
const WMO_ZH = {0:'æ™´',1:'å¤šé›²(å°‘)',2:'å¤šé›²(é–“æ­‡)',3:'é™°',45:'éœ§',48:'éœ§å‡',51:'æ¯›æ¯›é›¨(è¼•)',53:'æ¯›æ¯›é›¨(ä¸­)',55:'æ¯›æ¯›é›¨(å¼·)',56:'å†°æ¯›æ¯›é›¨(è¼•)',57:'å†°æ¯›æ¯›é›¨(å¼·)',61:'å°é›¨',63:'ä¸­é›¨',65:'å¤§é›¨',66:'å‡é›¨(è¼•)',67:'å‡é›¨(å¼·)',71:'å°é›ª',73:'ä¸­é›ª',75:'å¤§é›ª',77:'é›ªç²’',80:'é™£é›¨(è¼•)',81:'é™£é›¨(ä¸­)',82:'é™£é›¨(å¼·)',85:'é™£é›ª(è¼•)',86:'é™£é›ª(å¼·)',95:'é›·é›¨',96:'é›·é›¨(å°å†°é›¹)',99:'é›·é›¨(å¤§å†°é›¹)'};
const WMO_EN = {0:'Clear',1:'Mainly clear',2:'Partly cloudy',3:'Overcast',45:'Fog',48:'Depositing rime fog',51:'Drizzle (light)',53:'Drizzle (moderate)',55:'Drizzle (dense)',56:'Freezing drizzle (light)',57:'Freezing drizzle (dense)',61:'Rain (light)',63:'Rain (moderate)',65:'Rain (heavy)',66:'Freezing rain (light)',67:'Freezing rain (heavy)',71:'Snow (light)',73:'Snow (moderate)',75:'Snow (heavy)',77:'Snow grains',80:'Rain showers (light)',81:'Rain showers (moderate)',82:'Rain showers (violent)',85:'Snow showers (light)',86:'Snow showers (heavy)',95:'Thunderstorm',96:'Thunderstorm (slight hail)',99:'Thunderstorm (heavy hail)'};
const dirText = (deg, lang='zh')=>{
  const zh = ['åŒ—','åŒ—åŒ—æ±','åŒ—æ±','æ±åŒ—æ±','æ±','æ±å—æ±','å—æ±','å—å—æ±','å—','å—å—è¥¿','å—è¥¿','è¥¿å—è¥¿','è¥¿','è¥¿åŒ—è¥¿','åŒ—è¥¿','åŒ—åŒ—è¥¿'];
  const en = ['N','NNE','NE','ENE','E','ESE','SE','SSE','S','SSW','SW','WSW','W','WNW','NW','NNW'];
  const ix = Math.round(deg/22.5) % 16; return (lang==='en'?en:zh)[ix];
};

// Locations per day
const LOC = {
  home:{name_zh:'æœ­å¹Œ', name_en:'Sapporo', lat:43.0618, lon:141.3545},
  1:{name_zh:'æœ­å¹Œ', name_en:'Sapporo', lat:43.0618, lon:141.3545},
  2:{name_zh:'æœ­å¹Œ', name_en:'Sapporo', lat:43.0618, lon:141.3545},
  3:{name_zh:'æ—­å·', name_en:'Asahikawa', lat:43.7706, lon:142.3650},
  4:{name_zh:'æœ­å¹Œ', name_en:'Sapporo', lat:43.0618, lon:141.3545},
  5:{name_zh:'å°æ¨½', name_en:'Otaru', lat:43.1907, lon:141.0028},
  6:{name_zh:'åƒæ­²/æ”¯ç¬æ¹–', name_en:'Chitose/Shikotsu', lat:42.8209, lon:141.3923},
  7:{name_zh:'æœ­å¹Œ', name_en:'Sapporo', lat:43.0618, lon:141.3545},
  8:{name_zh:'ç™»åˆ¥', name_en:'Noboribetsu', lat:42.4124, lon:141.1069},
  9:{name_zh:'åƒæ­²', name_en:'Chitose', lat:42.7752, lon:141.6923}
};

// Helpers
function qs(s,root=document){return root.querySelector(s)}
function setText(id,v){const el=qs(id); if(el) el.textContent=v}
function fmt(n){return (n==null||Number.isNaN(n))?'â€”':Math.round(n)}

// Dates
function getDates(startStr){
  const start = new Date(startStr);
  return [...Array(9)].map((_,i)=>{const d=new Date(start); d.setDate(start.getDate()+i); return d.toISOString().slice(0,10);});
}
function initStartDate(){
  const input = qs('#start');
  if(!input.value){
    const t = new Date();
    const y=t.getFullYear(), m=('0'+(t.getMonth()+1)).slice(-2), d=('0'+t.getDate()).slice(-2);
    input.value = `${y}-${m}-${d}`;
  }
}

// Weather fetch
async function fetchDay(lat, lon, date, lang){
  const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=weather_code,temperature_2m_max,temperature_2m_min,precipitation_probability_max,wind_speed_10m_max,wind_direction_10m_dominant&timezone=Asia%2FTokyo&start_date=${date}&end_date=${date}`;
  const r = await fetch(url); if(!r.ok) throw new Error('HTTP '+r.status);
  const j = await r.json(); const idx=0; const code=j.daily.weather_code[idx];
  const map = lang==='en'? WMO_EN : WMO_ZH;
  return { code, cond: map[code]||code, tmax:j.daily.temperature_2m_max[idx], tmin:j.daily.temperature_2m_min[idx], pop:j.daily.precipitation_probability_max[idx], wspd:j.daily.wind_speed_10m_max[idx], wdir:j.daily.wind_direction_10m_dominant?.[idx] };
}
async function loadWeather(){
  const lang = currentLang; const startStr = (qs('#start')?.value);
  const dates = getDates(startStr);
  // Home
  setText('#wx-home-date', dates[0]);
  try{ const d = await fetchDay(LOC.home.lat, LOC.home.lon, dates[0], lang);
    setText('#wh-cond', d.cond); setText('#wh-tmax', fmt(d.tmax)); setText('#wh-tmin', fmt(d.tmin));
    setText('#wh-pop', (d.pop??'â€”')+'%'); setText('#wh-wspd', fmt(d.wspd)); setText('#wh-wdir', d.wdir!=null? dirText(d.wdir, lang): 'â€”');
  }catch(e){ setText('#wh-cond', lang==='en'?'Failed to load':'ç„¡æ³•å–å¾—'); }
  // Details
  for(let day=1; day<=9; day++){ const target=LOC[day]; const date=dates[day-1];
    setText('#wx-'+day+'-date', date);
    try{ const d = await fetchDay(target.lat, target.lon, date, lang);
      setText('#w'+day+'-cond', d.cond); setText('#w'+day+'-tmax', fmt(d.tmax)); setText('#w'+day+'-tmin', fmt(d.tmin));
      setText('#w'+day+'-pop', (d.pop??'â€”')+'%'); setText('#w'+day+'-wspd', fmt(d.wspd)); setText('#w'+day+'-wdir', d.wdir!=null? dirText(d.wdir, lang): 'â€”');
    }catch(e){ setText('#w'+day+'-cond', lang==='en'?'Failed to load':'ç„¡æ³•å–å¾—'); }
  }
}

// Modes & snow
function updateModes(){
  if(location.hash && location.hash.startsWith('#day')){ document.body.classList.add('detail-mode'); }
  else { document.body.classList.remove('detail-mode'); }
  const snow = document.getElementById('snow');
  if(location.hash && location.hash.startsWith('#day')) snow.classList.add('on'); else snow.classList.remove('on');
}
window.addEventListener('hashchange', updateModes);

// Audio controls
document.addEventListener('DOMContentLoaded',()=>{
  document.querySelectorAll('.section').forEach(sec=>{
    const file = sec.querySelector('.file'); const audio=sec.querySelector('.audio'); const play=sec.querySelector('.play'); const range=sec.querySelector('.range');
    if(!file||!audio||!play||!range) return;
    file.addEventListener('change', ()=>{ const f=file.files[0]; if(f){ audio.src=URL.createObjectURL(f); audio.load(); } });
    play.addEventListener('click', async ()=>{ try{ if(audio.paused){ await audio.play(); play.textContent = currentLang==='en'?'â¸ï¸ Pause':'â¸ï¸ æš«åœ'; } else { audio.pause(); play.textContent=currentLang==='en'?'â–¶ï¸ Play / Pause':'â–¶ï¸ æ’­æ”¾ / æš«åœ'; } }catch(e){} });
    range.addEventListener('input', ()=> audio.volume = range.value); audio.volume = range.value;
  });
});

// i18n
const applyLang = (lang)=>{
  currentLang = lang;
  document.querySelectorAll('.i18n').forEach(el=>{ const zh=el.getAttribute('data-zh'); const en=el.getAttribute('data-en'); if(lang==='en' && en) el.textContent=en; else if(zh) el.textContent=zh; });
  document.getElementById('btn-zh').classList.toggle('on', lang==='zh');
  document.getElementById('btn-en').classList.toggle('on', lang==='en');
  document.documentElement.setAttribute('lang', lang==='en' ? 'en' : 'zh-HK');
  loadWeather();
};

document.getElementById('btn-zh').addEventListener('click', ()=>applyLang('zh'));
document.getElementById('btn-en').addEventListener('click', ()=>applyLang('en'));
document.getElementById('start').addEventListener('change', loadWeather);

// Initial
initStartDate();
applyLang('zh');
updateModes();
loadWeather();
</script>
</body>
</html>
